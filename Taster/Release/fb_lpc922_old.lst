                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.8.0 #5117 (Mar 23 2008) (MINGW32)
                              4 ; This file was generated Sun Mar 04 15:12:46 2012
                              5 ;--------------------------------------------------------
                              6 	.module fb_lpc922_old
                              7 	.optsdcc -mmcs51 --model-small
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _eeprom
                             13 	.globl _userram
                             14 	.globl _P3_1
                             15 	.globl _P3_0
                             16 	.globl _P1_7
                             17 	.globl _P1_6
                             18 	.globl _P1_5
                             19 	.globl _P1_4
                             20 	.globl _P1_3
                             21 	.globl _P1_2
                             22 	.globl _P1_1
                             23 	.globl _P1_0
                             24 	.globl _P0_7
                             25 	.globl _P0_6
                             26 	.globl _P0_5
                             27 	.globl _P0_4
                             28 	.globl _P0_3
                             29 	.globl _P0_2
                             30 	.globl _P0_1
                             31 	.globl _P0_0
                             32 	.globl _I2CON_0
                             33 	.globl _I2CON_2
                             34 	.globl _I2CON_3
                             35 	.globl _I2CON_4
                             36 	.globl _I2CON_5
                             37 	.globl _I2CON_6
                             38 	.globl _SCON_7
                             39 	.globl _SCON_6
                             40 	.globl _SCON_5
                             41 	.globl _SCON_4
                             42 	.globl _SCON_3
                             43 	.globl _SCON_2
                             44 	.globl _SCON_1
                             45 	.globl _SCON_0
                             46 	.globl _IP0_0
                             47 	.globl _IP0_1
                             48 	.globl _IP0_2
                             49 	.globl _IP0_3
                             50 	.globl _IP0_4
                             51 	.globl _IP0_5
                             52 	.globl _IP0_6
                             53 	.globl _IP1_0
                             54 	.globl _IP1_1
                             55 	.globl _IP1_2
                             56 	.globl _IP1_6
                             57 	.globl _IEN1_0
                             58 	.globl _IEN1_1
                             59 	.globl _IEN1_2
                             60 	.globl _IEN0_0
                             61 	.globl _IEN0_1
                             62 	.globl _IEN0_2
                             63 	.globl _IEN0_3
                             64 	.globl _IEN0_4
                             65 	.globl _IEN0_5
                             66 	.globl _IEN0_6
                             67 	.globl _IEN0_7
                             68 	.globl _TCON_0
                             69 	.globl _TCON_1
                             70 	.globl _TCON_2
                             71 	.globl _TCON_3
                             72 	.globl _TCON_4
                             73 	.globl _TCON_5
                             74 	.globl _TCON_6
                             75 	.globl _TCON_7
                             76 	.globl _PSW_7
                             77 	.globl _PSW_6
                             78 	.globl _PSW_5
                             79 	.globl _PSW_4
                             80 	.globl _PSW_3
                             81 	.globl _PSW_2
                             82 	.globl _PSW_1
                             83 	.globl _PSW_0
                             84 	.globl _IEN1
                             85 	.globl _IP0H
                             86 	.globl _WFEED2
                             87 	.globl _WFEED1
                             88 	.globl _WDL
                             89 	.globl _WDCON
                             90 	.globl _TRIM
                             91 	.globl _TAMOD
                             92 	.globl _SSTAT
                             93 	.globl _RTCL
                             94 	.globl _RTCH
                             95 	.globl _RTCCON
                             96 	.globl _RSTSRC
                             97 	.globl _PT0AD
                             98 	.globl _PCONA
                             99 	.globl _P3M2
                            100 	.globl _P3M1
                            101 	.globl _P1M2
                            102 	.globl _P1M1
                            103 	.globl _P0M2
                            104 	.globl _P0M1
                            105 	.globl _KBPATN
                            106 	.globl _KBMASK
                            107 	.globl _KBCON
                            108 	.globl _IP1H
                            109 	.globl _IP1
                            110 	.globl _I2STAT
                            111 	.globl _I2SCLL
                            112 	.globl _I2SCLH
                            113 	.globl _I2DAT
                            114 	.globl _I2CON
                            115 	.globl _I2ADR
                            116 	.globl _FMDATA
                            117 	.globl _FMCON
                            118 	.globl _FMADRL
                            119 	.globl _FMADRH
                            120 	.globl _DIVM
                            121 	.globl _CMP2
                            122 	.globl _CMP1
                            123 	.globl _BRGCON
                            124 	.globl _BRGR1
                            125 	.globl _BRGR0
                            126 	.globl _SADEN
                            127 	.globl _SADDR
                            128 	.globl _AUXR1
                            129 	.globl _SBUF
                            130 	.globl _SCON
                            131 	.globl _IP0
                            132 	.globl _IEN0
                            133 	.globl _TH1
                            134 	.globl _TH0
                            135 	.globl _TL1
                            136 	.globl _TL0
                            137 	.globl _TMOD
                            138 	.globl _TCON
                            139 	.globl _PCON
                            140 	.globl _DPH
                            141 	.globl _DPL
                            142 	.globl _SP
                            143 	.globl _B
                            144 	.globl _ACC
                            145 	.globl _PSW
                            146 	.globl _P3
                            147 	.globl _P1
                            148 	.globl _P0
                            149 	.globl _connected
                            150 	.globl _transparency
                            151 	.globl _send_nack
                            152 	.globl _send_ack
                            153 	.globl _wait_for_ack
                            154 	.globl _fbtx_bit
                            155 	.globl _auto_ack
                            156 	.globl _tel_sent
                            157 	.globl _tel_arrived
                            158 	.globl _its_me
                            159 	.globl _nack
                            160 	.globl _ack
                            161 	.globl _fb_parity
                            162 	.globl _interrupted
                            163 	.globl _parity_ok
                            164 	.globl _status60
                            165 	.globl _tx_nextsend
                            166 	.globl _tx_nextwrite
                            167 	.globl _timeout_count
                            168 	.globl _repeat_count
                            169 	.globl _fb_state
                            170 	.globl _fb_pattern
                            171 	.globl _fbrx_byte
                            172 	.globl _cs
                            173 	.globl _telpos
                            174 	.globl _tx_buffer
                            175 	.globl _telegramm
                            176 	.globl _mem_length
                            177 	.globl _pcount
                            178 	.globl _conl
                            179 	.globl _conh
                            180 	.globl _X1_int
                            181 	.globl _T1_int
                            182 	.globl _init_rx
                            183 	.globl _init_tx
                            184 	.globl _init_repeat_tx
                            185 	.globl _gapos_in_gat
                            186 	.globl _build_tel
                            187 	.globl _send_obj_value
                            188 	.globl _process_tel
                            189 	.globl _write_memory
                            190 	.globl _set_pa
                            191 	.globl _read_objflags
                            192 	.globl _find_first_objno
                            193 	.globl _find_ga
                            194 	.globl _restart_hw
                            195 ;--------------------------------------------------------
                            196 ; special function registers
                            197 ;--------------------------------------------------------
                            198 	.area RSEG    (DATA)
                    0080    199 _P0	=	0x0080
                    0090    200 _P1	=	0x0090
                    00B0    201 _P3	=	0x00b0
                    00D0    202 _PSW	=	0x00d0
                    00E0    203 _ACC	=	0x00e0
                    00F0    204 _B	=	0x00f0
                    0081    205 _SP	=	0x0081
                    0082    206 _DPL	=	0x0082
                    0083    207 _DPH	=	0x0083
                    0087    208 _PCON	=	0x0087
                    0088    209 _TCON	=	0x0088
                    0089    210 _TMOD	=	0x0089
                    008A    211 _TL0	=	0x008a
                    008B    212 _TL1	=	0x008b
                    008C    213 _TH0	=	0x008c
                    008D    214 _TH1	=	0x008d
                    00A8    215 _IEN0	=	0x00a8
                    00B8    216 _IP0	=	0x00b8
                    0098    217 _SCON	=	0x0098
                    0099    218 _SBUF	=	0x0099
                    00A2    219 _AUXR1	=	0x00a2
                    00A9    220 _SADDR	=	0x00a9
                    00B9    221 _SADEN	=	0x00b9
                    00BE    222 _BRGR0	=	0x00be
                    00BF    223 _BRGR1	=	0x00bf
                    00BD    224 _BRGCON	=	0x00bd
                    00AC    225 _CMP1	=	0x00ac
                    00AD    226 _CMP2	=	0x00ad
                    0095    227 _DIVM	=	0x0095
                    00E7    228 _FMADRH	=	0x00e7
                    00E6    229 _FMADRL	=	0x00e6
                    00E4    230 _FMCON	=	0x00e4
                    00E5    231 _FMDATA	=	0x00e5
                    00DB    232 _I2ADR	=	0x00db
                    00D8    233 _I2CON	=	0x00d8
                    00DA    234 _I2DAT	=	0x00da
                    00DD    235 _I2SCLH	=	0x00dd
                    00DC    236 _I2SCLL	=	0x00dc
                    00D9    237 _I2STAT	=	0x00d9
                    00F8    238 _IP1	=	0x00f8
                    00F7    239 _IP1H	=	0x00f7
                    0094    240 _KBCON	=	0x0094
                    0086    241 _KBMASK	=	0x0086
                    0093    242 _KBPATN	=	0x0093
                    0084    243 _P0M1	=	0x0084
                    0085    244 _P0M2	=	0x0085
                    0091    245 _P1M1	=	0x0091
                    0092    246 _P1M2	=	0x0092
                    00B1    247 _P3M1	=	0x00b1
                    00B2    248 _P3M2	=	0x00b2
                    00B5    249 _PCONA	=	0x00b5
                    00F6    250 _PT0AD	=	0x00f6
                    00DF    251 _RSTSRC	=	0x00df
                    00D1    252 _RTCCON	=	0x00d1
                    00D2    253 _RTCH	=	0x00d2
                    00D3    254 _RTCL	=	0x00d3
                    00BA    255 _SSTAT	=	0x00ba
                    008F    256 _TAMOD	=	0x008f
                    0096    257 _TRIM	=	0x0096
                    00A7    258 _WDCON	=	0x00a7
                    00C1    259 _WDL	=	0x00c1
                    00C2    260 _WFEED1	=	0x00c2
                    00C3    261 _WFEED2	=	0x00c3
                    00B7    262 _IP0H	=	0x00b7
                    00E8    263 _IEN1	=	0x00e8
                            264 ;--------------------------------------------------------
                            265 ; special function bits
                            266 ;--------------------------------------------------------
                            267 	.area RSEG    (DATA)
                    00D0    268 _PSW_0	=	0x00d0
                    00D1    269 _PSW_1	=	0x00d1
                    00D2    270 _PSW_2	=	0x00d2
                    00D3    271 _PSW_3	=	0x00d3
                    00D4    272 _PSW_4	=	0x00d4
                    00D5    273 _PSW_5	=	0x00d5
                    00D6    274 _PSW_6	=	0x00d6
                    00D7    275 _PSW_7	=	0x00d7
                    008F    276 _TCON_7	=	0x008f
                    008E    277 _TCON_6	=	0x008e
                    008D    278 _TCON_5	=	0x008d
                    008C    279 _TCON_4	=	0x008c
                    008B    280 _TCON_3	=	0x008b
                    008A    281 _TCON_2	=	0x008a
                    0089    282 _TCON_1	=	0x0089
                    0088    283 _TCON_0	=	0x0088
                    00AF    284 _IEN0_7	=	0x00af
                    00AE    285 _IEN0_6	=	0x00ae
                    00AD    286 _IEN0_5	=	0x00ad
                    00AC    287 _IEN0_4	=	0x00ac
                    00AB    288 _IEN0_3	=	0x00ab
                    00AA    289 _IEN0_2	=	0x00aa
                    00A9    290 _IEN0_1	=	0x00a9
                    00A8    291 _IEN0_0	=	0x00a8
                    00EA    292 _IEN1_2	=	0x00ea
                    00E9    293 _IEN1_1	=	0x00e9
                    00E8    294 _IEN1_0	=	0x00e8
                    00FE    295 _IP1_6	=	0x00fe
                    00FA    296 _IP1_2	=	0x00fa
                    00F9    297 _IP1_1	=	0x00f9
                    00F8    298 _IP1_0	=	0x00f8
                    00BE    299 _IP0_6	=	0x00be
                    00BD    300 _IP0_5	=	0x00bd
                    00BC    301 _IP0_4	=	0x00bc
                    00BB    302 _IP0_3	=	0x00bb
                    00BA    303 _IP0_2	=	0x00ba
                    00B9    304 _IP0_1	=	0x00b9
                    00B8    305 _IP0_0	=	0x00b8
                    0098    306 _SCON_0	=	0x0098
                    0099    307 _SCON_1	=	0x0099
                    009A    308 _SCON_2	=	0x009a
                    009B    309 _SCON_3	=	0x009b
                    009C    310 _SCON_4	=	0x009c
                    009D    311 _SCON_5	=	0x009d
                    009E    312 _SCON_6	=	0x009e
                    009F    313 _SCON_7	=	0x009f
                    00DE    314 _I2CON_6	=	0x00de
                    00DD    315 _I2CON_5	=	0x00dd
                    00DC    316 _I2CON_4	=	0x00dc
                    00DB    317 _I2CON_3	=	0x00db
                    00DA    318 _I2CON_2	=	0x00da
                    00D8    319 _I2CON_0	=	0x00d8
                    0080    320 _P0_0	=	0x0080
                    0081    321 _P0_1	=	0x0081
                    0082    322 _P0_2	=	0x0082
                    0083    323 _P0_3	=	0x0083
                    0084    324 _P0_4	=	0x0084
                    0085    325 _P0_5	=	0x0085
                    0086    326 _P0_6	=	0x0086
                    0087    327 _P0_7	=	0x0087
                    0090    328 _P1_0	=	0x0090
                    0091    329 _P1_1	=	0x0091
                    0092    330 _P1_2	=	0x0092
                    0093    331 _P1_3	=	0x0093
                    0094    332 _P1_4	=	0x0094
                    0095    333 _P1_5	=	0x0095
                    0096    334 _P1_6	=	0x0096
                    0097    335 _P1_7	=	0x0097
                    00B0    336 _P3_0	=	0x00b0
                    00B1    337 _P3_1	=	0x00b1
                            338 ;--------------------------------------------------------
                            339 ; overlayable register banks
                            340 ;--------------------------------------------------------
                            341 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                     342 	.ds 8
                            343 ;--------------------------------------------------------
                            344 ; overlayable bit register bank
                            345 ;--------------------------------------------------------
                            346 	.area BIT_BANK	(REL,OVR,DATA)
   0000                     347 bits:
   0000                     348 	.ds 1
                    8000    349 	b0 = bits[0]
                    8100    350 	b1 = bits[1]
                    8200    351 	b2 = bits[2]
                    8300    352 	b3 = bits[3]
                    8400    353 	b4 = bits[4]
                    8500    354 	b5 = bits[5]
                    8600    355 	b6 = bits[6]
                    8700    356 	b7 = bits[7]
                            357 ;--------------------------------------------------------
                            358 ; internal ram data
                            359 ;--------------------------------------------------------
                            360 	.area DSEG    (DATA)
   0000                     361 _conh::
   0000                     362 	.ds 1
   0001                     363 _conl::
   0001                     364 	.ds 1
   0002                     365 _pcount::
   0002                     366 	.ds 1
   0003                     367 _mem_length::
   0003                     368 	.ds 1
   0004                     369 _telegramm::
   0004                     370 	.ds 23
   001B                     371 _tx_buffer::
   001B                     372 	.ds 8
   0023                     373 _telpos::
   0023                     374 	.ds 1
   0024                     375 _cs::
   0024                     376 	.ds 1
   0025                     377 _fbrx_byte::
   0025                     378 	.ds 1
   0026                     379 _fb_pattern::
   0026                     380 	.ds 1
   0027                     381 _fb_state::
   0027                     382 	.ds 1
   0028                     383 _repeat_count::
   0028                     384 	.ds 1
   0029                     385 _timeout_count::
   0029                     386 	.ds 1
   002A                     387 _tx_nextwrite::
   002A                     388 	.ds 1
   002B                     389 _tx_nextsend::
   002B                     390 	.ds 1
   002C                     391 _status60::
   002C                     392 	.ds 1
                            393 ;--------------------------------------------------------
                            394 ; overlayable items in internal ram 
                            395 ;--------------------------------------------------------
                            396 	.area OSEG    (OVR,DATA)
                            397 ;--------------------------------------------------------
                            398 ; indirectly addressable internal ram data
                            399 ;--------------------------------------------------------
                            400 	.area ISEG    (DATA)
                            401 ;--------------------------------------------------------
                            402 ; absolute internal ram data
                            403 ;--------------------------------------------------------
                            404 	.area IABS    (ABS,DATA)
                            405 	.area IABS    (ABS,DATA)
                            406 ;--------------------------------------------------------
                            407 ; bit data
                            408 ;--------------------------------------------------------
                            409 	.area BSEG    (BIT)
   0000                     410 _parity_ok::
   0000                     411 	.ds 1
   0001                     412 _interrupted::
   0001                     413 	.ds 1
   0002                     414 _fb_parity::
   0002                     415 	.ds 1
   0003                     416 _ack::
   0003                     417 	.ds 1
   0004                     418 _nack::
   0004                     419 	.ds 1
   0005                     420 _its_me::
   0005                     421 	.ds 1
   0006                     422 _tel_arrived::
   0006                     423 	.ds 1
   0007                     424 _tel_sent::
   0007                     425 	.ds 1
   0008                     426 _auto_ack::
   0008                     427 	.ds 1
   0009                     428 _fbtx_bit::
   0009                     429 	.ds 1
   000A                     430 _wait_for_ack::
   000A                     431 	.ds 1
   000B                     432 _send_ack::
   000B                     433 	.ds 1
   000C                     434 _send_nack::
   000C                     435 	.ds 1
   000D                     436 _transparency::
   000D                     437 	.ds 1
   000E                     438 _connected::
   000E                     439 	.ds 1
                            440 ;--------------------------------------------------------
                            441 ; paged external ram data
                            442 ;--------------------------------------------------------
                            443 	.area PSEG    (PAG,XDATA)
                            444 ;--------------------------------------------------------
                            445 ; external ram data
                            446 ;--------------------------------------------------------
                            447 	.area XSEG    (XDATA)
                            448 ;--------------------------------------------------------
                            449 ; absolute external ram data
                            450 ;--------------------------------------------------------
                            451 	.area XABS    (ABS,XDATA)
                            452 ;--------------------------------------------------------
                            453 ; external initialized ram data
                            454 ;--------------------------------------------------------
                            455 	.area XISEG   (XDATA)
                            456 	.area HOME    (CODE)
                            457 	.area GSINIT0 (CODE)
                            458 	.area GSINIT1 (CODE)
                            459 	.area GSINIT2 (CODE)
                            460 	.area GSINIT3 (CODE)
                            461 	.area GSINIT4 (CODE)
                            462 	.area GSINIT5 (CODE)
                            463 	.area GSINIT  (CODE)
                            464 	.area GSFINAL (CODE)
                            465 	.area CSEG    (CODE)
                            466 ;--------------------------------------------------------
                            467 ; global & static initialisations
                            468 ;--------------------------------------------------------
                            469 	.area HOME    (CODE)
                            470 	.area GSINIT  (CODE)
                            471 	.area GSFINAL (CODE)
                            472 	.area GSINIT  (CODE)
                            473 ;--------------------------------------------------------
                            474 ; Home
                            475 ;--------------------------------------------------------
                            476 	.area HOME    (CODE)
                            477 	.area HOME    (CODE)
                            478 ;--------------------------------------------------------
                            479 ; code
                            480 ;--------------------------------------------------------
                            481 	.area CSEG    (CODE)
                            482 ;------------------------------------------------------------
                            483 ;Allocation info for local variables in function 'X1_int'
                            484 ;------------------------------------------------------------
                            485 ;------------------------------------------------------------
                            486 ;	../fb_lpc922_old.c:58: void X1_int(void) interrupt 2		// Flanke des Startbits löst int1 aus
                            487 ;	-----------------------------------------
                            488 ;	 function X1_int
                            489 ;	-----------------------------------------
   0000                     490 _X1_int:
                    0002    491 	ar2 = 0x02
                    0003    492 	ar3 = 0x03
                    0004    493 	ar4 = 0x04
                    0005    494 	ar5 = 0x05
                    0006    495 	ar6 = 0x06
                    0007    496 	ar7 = 0x07
                    0000    497 	ar0 = 0x00
                    0001    498 	ar1 = 0x01
   0000 C0 E0               499 	push	acc
   0002 C0 D0               500 	push	psw
   0004 75 D0 00            501 	mov	psw,#0x00
                            502 ;	../fb_lpc922_old.c:61: EX1=0;			// int1 stoppen								1 cycle = 0,27127us
   0007 C2 AA               503 	clr	_IEN0_2
                            504 ;	../fb_lpc922_old.c:62: TR1=0;			// Timer 1 stoppen
   0009 C2 8E               505 	clr	_TCON_6
                            506 ;	../fb_lpc922_old.c:63: TMOD=(TMOD & 0x0F) + 0x20;	// Timer 1 als 8-Bit autoreload
   000B 74 0F               507 	mov	a,#0x0F
   000D 55 89               508 	anl	a,_TMOD
   000F 24 20               509 	add	a,#0x20
   0011 F5 89               510 	mov	_TMOD,a
                            511 ;	../fb_lpc922_old.c:64: TL1=128;		// Timer laden
   0013 75 8B 80            512 	mov	_TL1,#0x80
                            513 ;	../fb_lpc922_old.c:65: TH1=128;
   0016 75 8D 80            514 	mov	_TH1,#0x80
                            515 ;	../fb_lpc922_old.c:66: TF1=0;			// Timer1-flag löschen						1 cycle
   0019 C2 8F               516 	clr	_TCON_7
                            517 ;	../fb_lpc922_old.c:67: TR1=1;			// Timer1 starten							1 cycle
   001B D2 8E               518 	setb	_TCON_6
                            519 ;	../fb_lpc922_old.c:68: ET1=1;			// Timer1-int aktiv							1 cycle
   001D D2 AB               520 	setb	_IEN0_3
                            521 ;	../fb_lpc922_old.c:70: fb_state=1;		// nächster state
   001F 75*27 01            522 	mov	_fb_state,#0x01
                            523 ;	../fb_lpc922_old.c:71: fb_parity=0;	// Parity Bit löschen
   0022 C2*02               524 	clr	_fb_parity
                            525 ;	../fb_lpc922_old.c:72: parity_ok=1;	// wird bei Fehler gelöscht
   0024 D2*00               526 	setb	_parity_ok
                            527 ;	../fb_lpc922_old.c:73: fb_pattern=0;
   0026 75*26 00            528 	mov	_fb_pattern,#0x00
                            529 ;	../fb_lpc922_old.c:74: fbrx_byte=0;
   0029 75*25 00            530 	mov	_fbrx_byte,#0x00
                            531 ;	../fb_lpc922_old.c:75: interrupted=1;	// signalisiert app, dass unterbrochen wurde
   002C D2*01               532 	setb	_interrupted
                            533 ;	../fb_lpc922_old.c:76: timeout_count=158;					// 5,2ms = 50 Bit Pause
   002E 75*29 9E            534 	mov	_timeout_count,#0x9E
   0031 D0 D0               535 	pop	psw
   0033 D0 E0               536 	pop	acc
   0035 32                  537 	reti
                            538 ;	eliminated unneeded push/pop dpl
                            539 ;	eliminated unneeded push/pop dph
                            540 ;	eliminated unneeded push/pop b
                            541 ;------------------------------------------------------------
                            542 ;Allocation info for local variables in function 'T1_int'
                            543 ;------------------------------------------------------------
                            544 ;fbrx_bit                  Allocated to registers b0 
                            545 ;send_byte                 Allocated to registers r2 
                            546 ;------------------------------------------------------------
                            547 ;	../fb_lpc922_old.c:82: void T1_int(void) interrupt 3	// Timer 1 Interrupt
                            548 ;	-----------------------------------------
                            549 ;	 function T1_int
                            550 ;	-----------------------------------------
   0036                     551 _T1_int:
   0036 C0*00               552 	push	bits
   0038 C0 E0               553 	push	acc
   003A C0 F0               554 	push	b
   003C C0 82               555 	push	dpl
   003E C0 83               556 	push	dph
   0040 C0 02               557 	push	(0+2)
   0042 C0 03               558 	push	(0+3)
   0044 C0 04               559 	push	(0+4)
   0046 C0 05               560 	push	(0+5)
   0048 C0 06               561 	push	(0+6)
   004A C0 07               562 	push	(0+7)
   004C C0 00               563 	push	(0+0)
   004E C0 01               564 	push	(0+1)
   0050 C0 D0               565 	push	psw
   0052 75 D0 00            566 	mov	psw,#0x00
                            567 ;	../fb_lpc922_old.c:88: switch (fb_state){
   0055 AA*27               568 	mov	r2,_fb_state
   0057 BA 00 02            569 	cjne	r2,#0x00,00280$
   005A 80 3F               570 	sjmp	00101$
   005C                     571 00280$:
   005C BA 02 03            572 	cjne	r2,#0x02,00281$
   005F 02s00rE5            573 	ljmp	00115$
   0062                     574 00281$:
   0062 BA 03 03            575 	cjne	r2,#0x03,00282$
   0065 02s01r91            576 	ljmp	00150$
   0068                     577 00282$:
   0068 BA 04 03            578 	cjne	r2,#0x04,00283$
   006B 02s01r97            579 	ljmp	00151$
   006E                     580 00283$:
   006E BA 05 03            581 	cjne	r2,#0x05,00284$
   0071 02s02r02            582 	ljmp	00169$
   0074                     583 00284$:
   0074 BA 0A 03            584 	cjne	r2,#0x0A,00285$
   0077 02s02r2B            585 	ljmp	00177$
   007A                     586 00285$:
   007A BA 0B 03            587 	cjne	r2,#0x0B,00286$
   007D 02s02r94            588 	ljmp	00199$
   0080                     589 00286$:
   0080 BA 0C 03            590 	cjne	r2,#0x0C,00287$
   0083 02s02rB8            591 	ljmp	00203$
   0086                     592 00287$:
   0086 BA 0D 03            593 	cjne	r2,#0x0D,00288$
   0089 02s02rBD            594 	ljmp	00204$
   008C                     595 00288$:
   008C BA 17 03            596 	cjne	r2,#0x17,00289$
   008F 02s03r03            597 	ljmp	00214$
   0092                     598 00289$:
   0092 BA 50 03            599 	cjne	r2,#0x50,00290$
   0095 02s03r08            600 	ljmp	00215$
   0098                     601 00290$:
   0098 02s03r22            602 	ljmp	00219$
                            603 ;	../fb_lpc922_old.c:92: case 0:
   009B                     604 00101$:
                            605 ;	../fb_lpc922_old.c:93: if(timeout_count!=0) timeout_count--;	// Bus noch nicht frei
   009B E5*29               606 	mov	a,_timeout_count
   009D 60 05               607 	jz	00113$
   009F 15*29               608 	dec	_timeout_count
   00A1 02s03r24            609 	ljmp	00220$
   00A4                     610 00113$:
                            611 ;	../fb_lpc922_old.c:95: if(tx_nextsend != tx_nextwrite) { 			// wenn zu sendendes Objekt vorhanden
   00A4 E5*2A               612 	mov	a,_tx_nextwrite
   00A6 B5*2B 02            613 	cjne	a,_tx_nextsend,00292$
   00A9 80 33               614 	sjmp	00110$
   00AB                     615 00292$:
                            616 ;	../fb_lpc922_old.c:96: if(build_tel(tx_buffer[tx_nextsend])) {	// wenn Telegramm gebildet werden konnte
   00AB E5*2B               617 	mov	a,_tx_nextsend
   00AD 24r1B               618 	add	a,#_tx_buffer
   00AF F8                  619 	mov	r0,a
   00B0 86 82               620 	mov	dpl,@r0
   00B2 12s04r2E            621 	lcall	_build_tel
   00B5 50 22               622 	jnc	00107$
                            623 ;	../fb_lpc922_old.c:98: EX1=0; //Um zu vermeiden dass man in die Abfrage hinein-empfängt
   00B7 C2 AA               624 	clr	_IEN0_2
                            625 ;	../fb_lpc922_old.c:99: if(!fb_state) { //nur bilden wenn vorher kein rx_intit durch ext int kam
   00B9 E5*27               626 	mov	a,_fb_state
   00BB 70 11               627 	jnz	00103$
                            628 ;	../fb_lpc922_old.c:100: tx_buffer[tx_nextsend]|=0x20;		// Bit für "wird gerade gesendet"
   00BD E5*2B               629 	mov	a,_tx_nextsend
   00BF 24r1B               630 	add	a,#_tx_buffer
   00C1 F8                  631 	mov	r0,a
   00C2 86 02               632 	mov	ar2,@r0
   00C4 74 20               633 	mov	a,#0x20
   00C6 4A                  634 	orl	a,r2
   00C7 F6                  635 	mov	@r0,a
                            636 ;	../fb_lpc922_old.c:101: repeat_count=0;						// Wiederholungszähler für nicht geackte Telegramme
   00C8 75*28 00            637 	mov	_repeat_count,#0x00
                            638 ;	../fb_lpc922_old.c:102: init_tx();							// Senden starten
   00CB 12s03r71            639 	lcall	_init_tx
   00CE                     640 00103$:
                            641 ;	../fb_lpc922_old.c:104: if(!send_nack)EX1=1;	// ext1 int einschalten falls Empfang...
   00CE 30*0C 03            642 	jnb	_send_nack,00295$
   00D1 02s03r24            643 	ljmp	00220$
   00D4                     644 00295$:
   00D4 D2 AA               645 	setb	_IEN0_2
   00D6 02s03r24            646 	ljmp	00220$
   00D9                     647 00107$:
                            648 ;	../fb_lpc922_old.c:106: else tx_nextsend++; //hier Zeiger erhöhen wenn nichts zum Senden da ist
   00D9 05*2B               649 	inc	_tx_nextsend
   00DB 02s03r24            650 	ljmp	00220$
   00DE                     651 00110$:
                            652 ;	../fb_lpc922_old.c:109: TR1=0;		// nichts mehr zu tun, also statemachine stoppen
   00DE C2 8E               653 	clr	_TCON_6
                            654 ;	../fb_lpc922_old.c:110: EX1=1;		// sicherstellen, dass ext. Int. 1 aktiv ist
   00E0 D2 AA               655 	setb	_IEN0_2
                            656 ;	../fb_lpc922_old.c:113: break;
   00E2 02s03r24            657 	ljmp	00220$
                            658 ;	../fb_lpc922_old.c:116: case 2: // T=69,7us
   00E5                     659 00115$:
                            660 ;	../fb_lpc922_old.c:117: fbrx_bit=!IE1;				// Flipflop des ext. Int. 1 auslesen, ist 1 bei fallender Flanke am Pin
   00E5 A2 8B               661 	mov	c,_TCON_3
   00E7 B3                  662 	cpl	c
   00E8 92*00               663 	mov	b0,c
                            664 ;	../fb_lpc922_old.c:118: IE1=0;						// Flipflop zurücksetzen
   00EA C2 8B               665 	clr	_TCON_3
                            666 ;	../fb_lpc922_old.c:119: fb_state=3;					// nächster state: 3
   00EC 75*27 03            667 	mov	_fb_state,#0x03
                            668 ;	../fb_lpc922_old.c:120: if(fb_pattern==0) {			// fb_pattern=0 bedeutet, dass bisher nur das Startbit empfangen wurde
   00EF E5*26               669 	mov	a,_fb_pattern
   00F1 70 0A               670 	jnz	00148$
                            671 ;	../fb_lpc922_old.c:121: fb_pattern=1;			// 70us nach Startbit, als näcstes kommt Datenbit 0
   00F3 75*26 01            672 	mov	_fb_pattern,#0x01
                            673 ;	../fb_lpc922_old.c:122: ack=0;					// Empfang eines neuen Bytes, also ack/nack Flags zurücksetzen
   00F6 C2*03               674 	clr	_ack
                            675 ;	../fb_lpc922_old.c:123: nack=0;
   00F8 C2*04               676 	clr	_nack
   00FA 02s03r24            677 	ljmp	00220$
   00FD                     678 00148$:
                            679 ;	../fb_lpc922_old.c:126: if(fb_pattern<129) {					// Daten-Bit LSB first
   00FD 74 7F               680 	mov	a,#0x100 - 0x81
   00FF 25*26               681 	add	a,_fb_pattern
   0101 40 1C               682 	jc	00145$
                            683 ;	../fb_lpc922_old.c:127: if(fbrx_bit) {
   0103 30*00 08            684 	jnb	b0,00117$
                            685 ;	../fb_lpc922_old.c:128: fb_parity=!fb_parity;			// Paritybit berechnen
   0106 B2*02               686 	cpl	_fb_parity
                            687 ;	../fb_lpc922_old.c:129: fbrx_byte+=fb_pattern;			// Datenbit speichern
   0108 E5*26               688 	mov	a,_fb_pattern
   010A 25*25               689 	add	a,_fbrx_byte
   010C F5*25               690 	mov	_fbrx_byte,a
   010E                     691 00117$:
                            692 ;	../fb_lpc922_old.c:131: fb_pattern=fb_pattern<<1;			// nächstes Bit
   010E E5*26               693 	mov	a,_fb_pattern
   0110 25*26               694 	add	a,_fb_pattern
                            695 ;	../fb_lpc922_old.c:132: if(fb_pattern==0) fb_pattern=129;	// alle Daten-Bits gelesen, Parity-Bit folgt
   0112 F5*26               696 	mov	_fb_pattern,a
   0114 60 03               697 	jz	00299$
   0116 02s03r24            698 	ljmp	00220$
   0119                     699 00299$:
   0119 75*26 81            700 	mov	_fb_pattern,#0x81
   011C 02s03r24            701 	ljmp	00220$
   011F                     702 00145$:
                            703 ;	../fb_lpc922_old.c:135: TR1=0;
   011F C2 8E               704 	clr	_TCON_6
                            705 ;	../fb_lpc922_old.c:136: TF1=0; //prüfen ob erforderlich!!!
   0121 C2 8F               706 	clr	_TCON_7
                            707 ;	../fb_lpc922_old.c:137: if(fb_parity==fbrx_bit) {				// Parity-Bit OK
   0123 A2*02               708 	mov	c,_fb_parity
   0125 20*00 01            709 	jb	b0,00300$
   0128 B3                  710 	cpl	c
   0129                     711 00300$:
   0129 50 26               712 	jnc	00130$
                            713 ;	../fb_lpc922_old.c:138: if (telpos==0) {						// erstes empfangenes Byte
   012B E5*23               714 	mov	a,_telpos
   012D 70 0E               715 	jnz	00125$
                            716 ;	../fb_lpc922_old.c:139: if (fbrx_byte==0xCC) ack=1;				// ACK empfangen
   012F 74 CC               717 	mov	a,#0xCC
   0131 B5*25 02            718 	cjne	a,_fbrx_byte,00121$
   0134 D2*03               719 	setb	_ack
   0136                     720 00121$:
                            721 ;	../fb_lpc922_old.c:140: if (fbrx_byte==0x0C) nack=1;			// NACK empfangen
   0136 74 0C               722 	mov	a,#0x0C
   0138 B5*25 02            723 	cjne	a,_fbrx_byte,00125$
   013B D2*04               724 	setb	_nack
   013D                     725 00125$:
                            726 ;	../fb_lpc922_old.c:142: if (!ack && !nack) {					// Datenbyte empfangen
   013D 20*03 13            727 	jb	_ack,00131$
   0140 20*04 10            728 	jb	_nack,00131$
                            729 ;	../fb_lpc922_old.c:143: telegramm[telpos]=fbrx_byte;			// Byte speichern
   0143 E5*23               730 	mov	a,_telpos
   0145 24r04               731 	add	a,#_telegramm
   0147 F8                  732 	mov	r0,a
                            733 ;	../fb_lpc922_old.c:144: cs^=fbrx_byte;							// Checksum berechnen
   0148 E5*25               734 	mov	a,_fbrx_byte
   014A F6                  735 	mov	@r0,a
   014B 62*24               736 	xrl	_cs,a
                            737 ;	../fb_lpc922_old.c:145: telpos++;								// Telegrammzeiger erhöhen
   014D 05*23               738 	inc	_telpos
   014F 80 02               739 	sjmp	00131$
   0151                     740 00130$:
                            741 ;	../fb_lpc922_old.c:148: else parity_ok=0;						// Parity Error
   0151 C2*00               742 	clr	_parity_ok
   0153                     743 00131$:
                            744 ;	../fb_lpc922_old.c:150: if (wait_for_ack) {						// es wird ein ACK erwartet
                            745 ;	../fb_lpc922_old.c:151: wait_for_ack=0;							// Flag zurücksetzen, da wir es ja gerade abarbeiten
   0153 10*0A 02            746 	jbc	_wait_for_ack,00309$
   0156 80 12               747 	sjmp	00142$
   0158                     748 00309$:
                            749 ;	../fb_lpc922_old.c:152: if (ack && parity_ok) init_rx();		// ACK empfangen und auch erwartet
   0158 30*03 09            750 	jnb	_ack,00133$
   015B 30*00 06            751 	jnb	_parity_ok,00133$
   015E 12s03r46            752 	lcall	_init_rx
   0161 02s03r24            753 	ljmp	00220$
   0164                     754 00133$:
                            755 ;	../fb_lpc922_old.c:153: else init_repeat_tx();					// ACK erwartet, aber irgendwas empfangen
   0164 12s03rBF            756 	lcall	_init_repeat_tx
   0167 02s03r24            757 	ljmp	00220$
   016A                     758 00142$:
                            759 ;	../fb_lpc922_old.c:156: if (parity_ok && (!ack && !nack)) {		// ganz normales Datenbyte
   016A 30*00 1E            760 	jnb	_parity_ok,00137$
   016D 20*03 1B            761 	jb	_ack,00137$
   0170 20*04 18            762 	jb	_nack,00137$
                            763 ;	../fb_lpc922_old.c:157: TMOD=(TMOD & 0x0F) +0x10;			// Timer 1 als 16-Bit Timer
   0173 74 0F               764 	mov	a,#0x0F
   0175 55 89               765 	anl	a,_TMOD
   0177 24 10               766 	add	a,#0x10
   0179 F5 89               767 	mov	_TMOD,a
                            768 ;	../fb_lpc922_old.c:158: TH1=0xFA;							// Timer 1 auf Timeout-Position setzen (370us)
   017B 75 8D FA            769 	mov	_TH1,#0xFA
                            770 ;	../fb_lpc922_old.c:159: TL1=0xAB;
   017E 75 8B AB            771 	mov	_TL1,#0xAB
                            772 ;	../fb_lpc922_old.c:160: TR1=1;
   0181 D2 8E               773 	setb	_TCON_6
                            774 ;	../fb_lpc922_old.c:161: fb_state=4;							// nächster state: timeout = Telegramm fertig
   0183 75*27 04            775 	mov	_fb_state,#0x04
                            776 ;	../fb_lpc922_old.c:162: EX1=1;								// int1 aktiv, falls noch ein Byte kommt
   0186 D2 AA               777 	setb	_IEN0_2
   0188 02s03r24            778 	ljmp	00220$
   018B                     779 00137$:
                            780 ;	../fb_lpc922_old.c:164: else init_rx();							// irgendwas empfangen
   018B 12s03r46            781 	lcall	_init_rx
                            782 ;	../fb_lpc922_old.c:168: break;
   018E 02s03r24            783 	ljmp	00220$
                            784 ;	../fb_lpc922_old.c:170: case 3: // T=104us=0us
   0191                     785 00150$:
                            786 ;	../fb_lpc922_old.c:171: fb_state=1;
   0191 75*27 01            787 	mov	_fb_state,#0x01
                            788 ;	../fb_lpc922_old.c:172: break;
   0194 02s03r24            789 	ljmp	00220$
                            790 ;	../fb_lpc922_old.c:174: case 4:	//	Timeout, d.h. Telegramm-Ende
   0197                     791 00151$:
                            792 ;	../fb_lpc922_old.c:175: if (auto_ack && telpos>4) {		// wenn ACK gesendet werden soll und Telegramm zumindest 5 Bytes hat
   0197 30*08 5A            793 	jnb	_auto_ack,00166$
   019A E5*23               794 	mov	a,_telpos
   019C 24 FB               795 	add	a,#0xff - 0x04
   019E 50 54               796 	jnc	00166$
                            797 ;	../fb_lpc922_old.c:176: TR1=0;
   01A0 C2 8E               798 	clr	_TCON_6
                            799 ;	../fb_lpc922_old.c:177: TMOD=(TMOD & 0x0F) +0x10;	// Timer 1 als 16-Bit Timer
   01A2 74 0F               800 	mov	a,#0x0F
   01A4 55 89               801 	anl	a,_TMOD
   01A6 24 10               802 	add	a,#0x10
   01A8 F5 89               803 	mov	_TMOD,a
                            804 ;	../fb_lpc922_old.c:178: TH1=0xEF;					// Timer 1 auf ACK-Position setzen
   01AA 75 8D EF            805 	mov	_TH1,#0xEF
                            806 ;	../fb_lpc922_old.c:179: TL1=0x73;//6D	6F wegen zusätliche flipflopabfrage.
   01AD 75 8B 73            807 	mov	_TL1,#0x73
                            808 ;	../fb_lpc922_old.c:180: TR1=1;
   01B0 D2 8E               809 	setb	_TCON_6
                            810 ;	../fb_lpc922_old.c:181: its_me=transparency;			// indiziert, ob dieses Gerät adressiert wurde, bei transparecy=1 immer
   01B2 A2*0D               811 	mov	c,_transparency
   01B4 92*05               812 	mov	_its_me,c
                            813 ;	../fb_lpc922_old.c:182: if(telegramm[5]&0x80) {
   01B6 E5*09               814 	mov	a,(_telegramm + 0x0005)
   01B8 30 E7 1F            815 	jnb	acc.7,00161$
                            816 ;	../fb_lpc922_old.c:183: if (gapos_in_gat(telegramm[3],telegramm[4])!=0xFF) its_me=1;	// Gruppenadresse
   01BB 85*07 82            817 	mov	dpl,(_telegramm + 0x0003)
   01BE C0*08               818 	push	(_telegramm + 0x0004)
   01C0 12s03rE9            819 	lcall	_gapos_in_gat
   01C3 AA 82               820 	mov	r2,dpl
   01C5 15 81               821 	dec	sp
   01C7 BA FF 02            822 	cjne	r2,#0xFF,00318$
   01CA 80 02               823 	sjmp	00153$
   01CC                     824 00318$:
   01CC D2*05               825 	setb	_its_me
   01CE                     826 00153$:
                            827 ;	../fb_lpc922_old.c:184: if (telegramm[3]==0 && telegramm[4]==0) its_me=1;				// Broadcast
   01CE E5*07               828 	mov	a,(_telegramm + 0x0003)
   01D0 70 1C               829 	jnz	00162$
   01D2 E5*08               830 	mov	a,(_telegramm + 0x0004)
   01D4 70 18               831 	jnz	00162$
   01D6 D2*05               832 	setb	_its_me
   01D8 80 14               833 	sjmp	00162$
   01DA                     834 00161$:
                            835 ;	../fb_lpc922_old.c:186: else if(telegramm[3]==eeprom[ADDRTAB+1] && telegramm[4]==eeprom[ADDRTAB+2]) its_me=1;	// phys. Adresse
   01DA 90 1D 17            836 	mov	dptr,#(_eeprom + 0x0017)
   01DD E4                  837 	clr	a
   01DE 93                  838 	movc	a,@a+dptr
   01DF FA                  839 	mov	r2,a
   01E0 B5*07 0B            840 	cjne	a,(_telegramm + 0x0003),00162$
   01E3 90 1D 18            841 	mov	dptr,#(_eeprom + 0x0018)
   01E6 E4                  842 	clr	a
   01E7 93                  843 	movc	a,@a+dptr
   01E8 FA                  844 	mov	r2,a
   01E9 B5*08 02            845 	cjne	a,(_telegramm + 0x0004),00162$
   01EC D2*05               846 	setb	_its_me
   01EE                     847 00162$:
                            848 ;	../fb_lpc922_old.c:187: fb_state=5;					// nächster state: ACK-Position erreicht
   01EE 75*27 05            849 	mov	_fb_state,#0x05
   01F1 02s03r24            850 	ljmp	00220$
   01F4                     851 00166$:
                            852 ;	../fb_lpc922_old.c:190: if (telpos>1) tel_arrived=1;	// trotzdem den Eingang eines Telegramms anzeigen
   01F4 E5*23               853 	mov	a,_telpos
   01F6 24 FE               854 	add	a,#0xff - 0x01
   01F8 50 02               855 	jnc	00164$
   01FA D2*06               856 	setb	_tel_arrived
   01FC                     857 00164$:
                            858 ;	../fb_lpc922_old.c:191: init_rx();						// wieder in den Empfang zurück
   01FC 12s03r46            859 	lcall	_init_rx
                            860 ;	../fb_lpc922_old.c:193: break;
   01FF 02s03r24            861 	ljmp	00220$
                            862 ;	../fb_lpc922_old.c:195: case 5:	// ACK-Position erreicht
   0202                     863 00169$:
                            864 ;	../fb_lpc922_old.c:196: TR1=0;
   0202 C2 8E               865 	clr	_TCON_6
                            866 ;	../fb_lpc922_old.c:197: if (cs==0xFF && parity_ok) {	// Checksum und Parity OK
   0204 74 FF               867 	mov	a,#0xFF
   0206 B5*24 18            868 	cjne	a,_cs,00174$
   0209 30*00 15            869 	jnb	_parity_ok,00174$
                            870 ;	../fb_lpc922_old.c:198: if (its_me) {					// Gerät adressiert
   020C 30*05 0C            871 	jnb	_its_me,00171$
                            872 ;	../fb_lpc922_old.c:199: tel_arrived=1;					// signalisiert, dass Telegramm eingetroffen
   020F D2*06               873 	setb	_tel_arrived
                            874 ;	../fb_lpc922_old.c:200: send_ack=1;
   0211 D2*0B               875 	setb	_send_ack
                            876 ;	../fb_lpc922_old.c:201: init_tx();						// Senden initiieren
   0213 12s03r71            877 	lcall	_init_tx
                            878 ;	../fb_lpc922_old.c:202: wait_for_ack=0;					// bei ACK senden nicht erneut auf ACK warten
   0216 C2*0A               879 	clr	_wait_for_ack
   0218 02s03r24            880 	ljmp	00220$
   021B                     881 00171$:
                            882 ;	../fb_lpc922_old.c:204: else init_rx();					// Gerät nicht adressiert, also zurück zu Empfang
   021B 12s03r46            883 	lcall	_init_rx
   021E 02s03r24            884 	ljmp	00220$
   0221                     885 00174$:
                            886 ;	../fb_lpc922_old.c:207: send_nack=1;
   0221 D2*0C               887 	setb	_send_nack
                            888 ;	../fb_lpc922_old.c:208: init_tx();
   0223 12s03r71            889 	lcall	_init_tx
                            890 ;	../fb_lpc922_old.c:209: wait_for_ack=0;					// bei NACK senden nicht erneut auf ACK warten
   0226 C2*0A               891 	clr	_wait_for_ack
                            892 ;	../fb_lpc922_old.c:211: break;
   0228 02s03r24            893 	ljmp	00220$
                            894 ;	../fb_lpc922_old.c:215: case 10:	// Byte Senden, T=0us
   022B                     895 00177$:
                            896 ;	../fb_lpc922_old.c:216: send_byte=telegramm[telpos];
   022B E5*23               897 	mov	a,_telpos
   022D 24r04               898 	add	a,#_telegramm
   022F F8                  899 	mov	r0,a
   0230 86 02               900 	mov	ar2,@r0
                            901 ;	../fb_lpc922_old.c:217: if (send_ack) send_byte=0xCC;
   0232 30*0B 02            902 	jnb	_send_ack,00179$
   0235 7A CC               903 	mov	r2,#0xCC
   0237                     904 00179$:
                            905 ;	../fb_lpc922_old.c:218: if (send_nack) send_byte=0x0C;
   0237 30*0C 02            906 	jnb	_send_nack,00181$
   023A 7A 0C               907 	mov	r2,#0x0C
   023C                     908 00181$:
                            909 ;	../fb_lpc922_old.c:219: EX1=0;					// Empfang verhindern
   023C C2 AA               910 	clr	_IEN0_2
                            911 ;	../fb_lpc922_old.c:221: if((fb_state==10)||send_nack){		
   023E 74 0A               912 	mov	a,#0x0A
   0240 B5*27 02            913 	cjne	a,_fb_state,00332$
   0243 80 06               914 	sjmp	00196$
   0245                     915 00332$:
   0245 20*0C 03            916 	jb	_send_nack,00333$
   0248 02s03r24            917 	ljmp	00220$
   024B                     918 00333$:
   024B                     919 00196$:
                            920 ;	../fb_lpc922_old.c:223: if (fb_pattern<=128) {			// Startbit und Datenbits
   024B E5*26               921 	mov	a,_fb_pattern
   024D 24 7F               922 	add	a,#0xff - 0x80
   024F 40 2D               923 	jc	00194$
                            924 ;	../fb_lpc922_old.c:224: if ((send_byte & fb_pattern)==0) {	// wenn Bit logisch 0 ist
   0251 E5*26               925 	mov	a,_fb_pattern
   0253 5A                  926 	anl	a,r2
   0254 70 08               927 	jnz	00183$
                            928 ;	../fb_lpc922_old.c:225: FBOUTC=1;						// Bus runter ziehen
   0256 D2 96               929 	setb	_P1_6
                            930 ;	../fb_lpc922_old.c:226: fbtx_bit=0;						// fbtx_bit dient zur späteren Kollisionsprüfung
   0258 C2*09               931 	clr	_fbtx_bit
                            932 ;	../fb_lpc922_old.c:227: fb_parity=!fb_parity;			// Parity-Bit berechnen
   025A B2*02               933 	cpl	_fb_parity
   025C 80 02               934 	sjmp	00184$
   025E                     935 00183$:
                            936 ;	../fb_lpc922_old.c:229: else fbtx_bit=1;
   025E D2*09               937 	setb	_fbtx_bit
   0260                     938 00184$:
                            939 ;	../fb_lpc922_old.c:230: if (fb_pattern==0) {				// wenn Startbit: parity zurücksetzen
   0260 E5*26               940 	mov	a,_fb_pattern
   0262 70 07               941 	jnz	00186$
                            942 ;	../fb_lpc922_old.c:231: fb_pattern=1;					// auf erstes Datenbit zeigen
   0264 75*26 01            943 	mov	_fb_pattern,#0x01
                            944 ;	../fb_lpc922_old.c:232: fb_parity=0;
   0267 C2*02               945 	clr	_fb_parity
   0269 80 06               946 	sjmp	00187$
   026B                     947 00186$:
                            948 ;	../fb_lpc922_old.c:234: else fb_pattern=fb_pattern<<1;		// nächstes Datenbit
   026B E5*26               949 	mov	a,_fb_pattern
   026D 25*26               950 	add	a,_fb_pattern
   026F F5*26               951 	mov	_fb_pattern,a
   0271                     952 00187$:
                            953 ;	../fb_lpc922_old.c:235: if(fb_pattern==0) fb_pattern=129;	// alle Daten-Bits gesendet, Parity-Bit folgt
   0271 E5*26               954 	mov	a,_fb_pattern
   0273 70 03               955 	jnz	00189$
   0275 75*26 81            956 	mov	_fb_pattern,#0x81
   0278                     957 00189$:
                            958 ;	../fb_lpc922_old.c:236: fb_state=11;
   0278 75*27 0B            959 	mov	_fb_state,#0x0B
   027B 02s03r24            960 	ljmp	00220$
   027E                     961 00194$:
                            962 ;	../fb_lpc922_old.c:239: if (!fb_parity) {				// wenn Parity-Bit logisch 0
   027E 20*02 06            963 	jb	_fb_parity,00191$
                            964 ;	../fb_lpc922_old.c:240: FBOUTC=1;						// Bus runterziehen
   0281 D2 96               965 	setb	_P1_6
                            966 ;	../fb_lpc922_old.c:241: fbtx_bit=0;						// fbtx_bit dient zur späteren Kollisionsprüfung
   0283 C2*09               967 	clr	_fbtx_bit
   0285 80 02               968 	sjmp	00192$
   0287                     969 00191$:
                            970 ;	../fb_lpc922_old.c:243: else fbtx_bit=1;
   0287 D2*09               971 	setb	_fbtx_bit
   0289                     972 00192$:
                            973 ;	../fb_lpc922_old.c:244: telpos++;					// nächstes Byte
   0289 05*23               974 	inc	_telpos
                            975 ;	../fb_lpc922_old.c:245: fb_pattern=0;				// wieder mit Startbit beginnen
   028B 75*26 00            976 	mov	_fb_pattern,#0x00
                            977 ;	../fb_lpc922_old.c:246: fb_state=13;				// Prüfen ob Telegramm fertig
   028E 75*27 0D            978 	mov	_fb_state,#0x0D
                            979 ;	../fb_lpc922_old.c:253: break;
   0291 02s03r24            980 	ljmp	00220$
                            981 ;	../fb_lpc922_old.c:255: case 11:	// Sendestufe aus, T=35us
   0294                     982 00199$:
                            983 ;	../fb_lpc922_old.c:273: _endasm;
                            984 	
   0294 00                  985 	  nop
   0295 00                  986 	  nop
   0296 00                  987 	  nop
   0297 00                  988 	  nop
   0298 00                  989 	  nop
   0299 00                  990 	  nop
   029A 00                  991 	  nop
   029B 00                  992 	  nop
   029C 00                  993 	  nop
   029D 00                  994 	  nop
   029E 00                  995 	  nop
   029F 00                  996 	  nop
   02A0 00                  997 	  nop
   02A1 00                  998 	  nop
   02A2 00                  999 	  nop
   02A3 00                 1000 	  nop
                           1001 	  
                           1002 ;	../fb_lpc922_old.c:274: FBOUTC=0;				// Sendestufe aus
   02A4 C2 96              1003 	clr	_P1_6
                           1004 ;	../fb_lpc922_old.c:275: if (fbtx_bit & IE1) {	// Kollision
   02A6 A2*09              1005 	mov	c,_fbtx_bit
   02A8 82 8B              1006 	anl	c,_TCON_3
   02AA 50 05              1007 	jnc	00201$
                           1008 ;	../fb_lpc922_old.c:276: init_rx();				// Senden abbrechen und Empfang initialisieren
   02AC 12s03r46           1009 	lcall	_init_rx
   02AF 80 03              1010 	sjmp	00202$
   02B1                    1011 00201$:
                           1012 ;	../fb_lpc922_old.c:278: else fb_state=12;
   02B1 75*27 0C           1013 	mov	_fb_state,#0x0C
   02B4                    1014 00202$:
                           1015 ;	../fb_lpc922_old.c:279: IE1=0;					// Flipflop löschen
   02B4 C2 8B              1016 	clr	_TCON_3
                           1017 ;	../fb_lpc922_old.c:280: break;
                           1018 ;	../fb_lpc922_old.c:282: case 12:	// T=70us
   02B6 80 6C              1019 	sjmp	00220$
   02B8                    1020 00203$:
                           1021 ;	../fb_lpc922_old.c:283: fb_state=10;
   02B8 75*27 0A           1022 	mov	_fb_state,#0x0A
                           1023 ;	../fb_lpc922_old.c:284: break;
                           1024 ;	../fb_lpc922_old.c:286: case 13:	// Byte übertragen, T=35us, prüfen ob Telegramm fertig
   02BB 80 67              1025 	sjmp	00220$
   02BD                    1026 00204$:
                           1027 ;	../fb_lpc922_old.c:287: FBOUTC=0;
   02BD C2 96              1028 	clr	_P1_6
                           1029 ;	../fb_lpc922_old.c:288: if (send_ack || send_nack) {	// ACK/NACK senden
   02BF 20*0B 03           1030 	jb	_send_ack,00210$
   02C2 30*0C 09           1031 	jnb	_send_nack,00211$
   02C5                    1032 00210$:
                           1033 ;	../fb_lpc922_old.c:289: init_rx();					// ACK senden abgeschlossen, also statemachine auf Anfang
   02C5 12s03r46           1034 	lcall	_init_rx
                           1035 ;	../fb_lpc922_old.c:290: send_ack=0;
   02C8 C2*0B              1036 	clr	_send_ack
                           1037 ;	../fb_lpc922_old.c:291: send_nack=0;
   02CA C2*0C              1038 	clr	_send_nack
   02CC 80 31              1039 	sjmp	00212$
   02CE                    1040 00211$:
                           1041 ;	../fb_lpc922_old.c:294: if (telpos>((telegramm[5]&0x0F)+7)) {
   02CE 74 0F              1042 	mov	a,#0x0F
   02D0 55*09              1043 	anl	a,(_telegramm + 0x0005)
   02D2 FA                 1044 	mov	r2,a
   02D3 7B 00              1045 	mov	r3,#0x00
   02D5 74 07              1046 	mov	a,#0x07
   02D7 2A                 1047 	add	a,r2
   02D8 FA                 1048 	mov	r2,a
   02D9 E4                 1049 	clr	a
   02DA 3B                 1050 	addc	a,r3
   02DB FB                 1051 	mov	r3,a
   02DC AC*23              1052 	mov	r4,_telpos
   02DE 7D 00              1053 	mov	r5,#0x00
   02E0 C3                 1054 	clr	c
   02E1 EA                 1055 	mov	a,r2
   02E2 9C                 1056 	subb	a,r4
   02E3 EB                 1057 	mov	a,r3
   02E4 64 80              1058 	xrl	a,#0x80
   02E6 8D F0              1059 	mov	b,r5
   02E8 63 F0 80           1060 	xrl	b,#0x80
   02EB 95 F0              1061 	subb	a,b
   02ED 50 0D              1062 	jnc	00208$
                           1063 ;	../fb_lpc922_old.c:295: tel_sent=1;
   02EF D2*07              1064 	setb	_tel_sent
                           1065 ;	../fb_lpc922_old.c:296: if(repeat_count==0)	tx_nextsend++; // byte ist ohne kollision rausgegangen
   02F1 E5*28              1066 	mov	a,_repeat_count
   02F3 70 02              1067 	jnz	00206$
   02F5 05*2B              1068 	inc	_tx_nextsend
   02F7                    1069 00206$:
                           1070 ;	../fb_lpc922_old.c:297: init_repeat_tx();	// Telegramm senden abgeschlossen, ggf. wiederholen wenn nicht geackt wird
   02F7 12s03rBF           1071 	lcall	_init_repeat_tx
   02FA 80 03              1072 	sjmp	00212$
   02FC                    1073 00208$:
                           1074 ;	../fb_lpc922_old.c:300: else fb_state=14;		// nächstes Byte: Interbyte Abstand einhalten
   02FC 75*27 0E           1075 	mov	_fb_state,#0x0E
   02FF                    1076 00212$:
                           1077 ;	../fb_lpc922_old.c:302: IE1=0;
   02FF C2 8B              1078 	clr	_TCON_3
                           1079 ;	../fb_lpc922_old.c:303: break;
                           1080 ;	../fb_lpc922_old.c:306: case 23:	// Interbyte Abstand erreicht (=Stopbit + 2 Bit)
   0301 80 21              1081 	sjmp	00220$
   0303                    1082 00214$:
                           1083 ;	../fb_lpc922_old.c:307: fb_state=10;
   0303 75*27 0A           1084 	mov	_fb_state,#0x0A
                           1085 ;	../fb_lpc922_old.c:308: break;
                           1086 ;	../fb_lpc922_old.c:310: case 80:	// Telegramm nochmal als Wiederholung senden
   0306 80 1C              1087 	sjmp	00220$
   0308                    1088 00215$:
                           1089 ;	../fb_lpc922_old.c:311: if (repeat_count<3) {		// falls noch nicht 3 mal wiederholt
   0308 74 FD              1090 	mov	a,#0x100 - 0x03
   030A 25*28              1091 	add	a,_repeat_count
   030C 40 0D              1092 	jc	00217$
                           1093 ;	../fb_lpc922_old.c:312: telegramm[0]&=0xDF;		// Wiederholungsbit löschen
   030E 74 DF              1094 	mov	a,#0xDF
   0310 55*04              1095 	anl	a,_telegramm
   0312 F5*04              1096 	mov	_telegramm,a
                           1097 ;	../fb_lpc922_old.c:313: repeat_count++;			// Zähler erhöhen
   0314 05*28              1098 	inc	_repeat_count
                           1099 ;	../fb_lpc922_old.c:314: init_tx();				// Senden initiieren
   0316 12s03r71           1100 	lcall	_init_tx
   0319 80 09              1101 	sjmp	00220$
   031B                    1102 00217$:
                           1103 ;	../fb_lpc922_old.c:317: init_rx();				// wenn schon 3 mal wiederholt statemachine zurücksetzen
   031B 12s03r46           1104 	lcall	_init_rx
                           1105 ;	../fb_lpc922_old.c:318: wait_for_ack=0;			// jetzt braucht das ack auch nicht mehr kommen
   031E C2*0A              1106 	clr	_wait_for_ack
                           1107 ;	../fb_lpc922_old.c:320: break;
                           1108 ;	../fb_lpc922_old.c:322: default:
   0320 80 02              1109 	sjmp	00220$
   0322                    1110 00219$:
                           1111 ;	../fb_lpc922_old.c:323: fb_state++;			// bei allen nicht angegebenen states nur state erhöhen
   0322 05*27              1112 	inc	_fb_state
                           1113 ;	../fb_lpc922_old.c:324: }
   0324                    1114 00220$:
                           1115 ;	../fb_lpc922_old.c:325: tx_nextsend&=0x07;		// Nur 3 Bit verwenden
   0324 53r2B 07           1116 	anl	_tx_nextsend,#0x07
                           1117 ;	../fb_lpc922_old.c:326: interrupted=1;			// zeigt der app, dass sie unterbrochen wurde
   0327 D2*01              1118 	setb	_interrupted
   0329 D0 D0              1119 	pop	psw
   032B D0 01              1120 	pop	(0+1)
   032D D0 00              1121 	pop	(0+0)
   032F D0 07              1122 	pop	(0+7)
   0331 D0 06              1123 	pop	(0+6)
   0333 D0 05              1124 	pop	(0+5)
   0335 D0 04              1125 	pop	(0+4)
   0337 D0 03              1126 	pop	(0+3)
   0339 D0 02              1127 	pop	(0+2)
   033B D0 83              1128 	pop	dph
   033D D0 82              1129 	pop	dpl
   033F D0 F0              1130 	pop	b
   0341 D0 E0              1131 	pop	acc
   0343 D0*00              1132 	pop	bits
   0345 32                 1133 	reti
                           1134 ;------------------------------------------------------------
                           1135 ;Allocation info for local variables in function 'init_rx'
                           1136 ;------------------------------------------------------------
                           1137 ;------------------------------------------------------------
                           1138 ;	../fb_lpc922_old.c:330: void init_rx(void)			// Empfangen initiieren (statemachine auf Anfang)
                           1139 ;	-----------------------------------------
                           1140 ;	 function init_rx
                           1141 ;	-----------------------------------------
   0346                    1142 _init_rx:
                           1143 ;	../fb_lpc922_old.c:332: fb_state=0;
   0346 75*27 00           1144 	mov	_fb_state,#0x00
                           1145 ;	../fb_lpc922_old.c:333: IE1=0;
   0349 C2 8B              1146 	clr	_TCON_3
                           1147 ;	../fb_lpc922_old.c:334: TR1=0;
   034B C2 8E              1148 	clr	_TCON_6
                           1149 ;	../fb_lpc922_old.c:335: ET1=0;
   034D C2 AB              1150 	clr	_IEN0_3
                           1151 ;	../fb_lpc922_old.c:336: cs=0;
   034F 75*24 00           1152 	mov	_cs,#0x00
                           1153 ;	../fb_lpc922_old.c:337: telpos=0;
   0352 75*23 00           1154 	mov	_telpos,#0x00
                           1155 ;	../fb_lpc922_old.c:338: TR1=0;
   0355 C2 8E              1156 	clr	_TCON_6
                           1157 ;	../fb_lpc922_old.c:339: TMOD=(TMOD & 0x0F) +0x20;			// Timer 1 als 8-Bit autoreload
   0357 74 0F              1158 	mov	a,#0x0F
   0359 55 89              1159 	anl	a,_TMOD
   035B 24 20              1160 	add	a,#0x20
   035D F5 89              1161 	mov	_TMOD,a
                           1162 ;	../fb_lpc922_old.c:340: TH1=128;							// Timer 1 auf 104/3 us laden
   035F 75 8D 80           1163 	mov	_TH1,#0x80
                           1164 ;	../fb_lpc922_old.c:341: TL1=128;
   0362 75 8B 80           1165 	mov	_TL1,#0x80
                           1166 ;	../fb_lpc922_old.c:342: timeout_count=158;					// 5,2ms = 50 Bit Pause
   0365 75*29 9E           1167 	mov	_timeout_count,#0x9E
                           1168 ;	../fb_lpc922_old.c:343: TF1=0;
   0368 C2 8F              1169 	clr	_TCON_7
                           1170 ;	../fb_lpc922_old.c:344: TR1=1;
   036A D2 8E              1171 	setb	_TCON_6
                           1172 ;	../fb_lpc922_old.c:345: EX1=1;
   036C D2 AA              1173 	setb	_IEN0_2
                           1174 ;	../fb_lpc922_old.c:346: ET1=1;
   036E D2 AB              1175 	setb	_IEN0_3
   0370 22                 1176 	ret
                           1177 ;------------------------------------------------------------
                           1178 ;Allocation info for local variables in function 'init_tx'
                           1179 ;------------------------------------------------------------
                           1180 ;n                         Allocated to registers r3 
                           1181 ;cs_pos                    Allocated to registers r2 
                           1182 ;------------------------------------------------------------
                           1183 ;	../fb_lpc922_old.c:350: void init_tx(void)		// Checksum des Telegramms berechnen und Senden initiieren
                           1184 ;	-----------------------------------------
                           1185 ;	 function init_tx
                           1186 ;	-----------------------------------------
   0371                    1187 _init_tx:
                           1188 ;	../fb_lpc922_old.c:354: TR1=0;
   0371 C2 8E              1189 	clr	_TCON_6
                           1190 ;	../fb_lpc922_old.c:355: TMOD=(TMOD & 0x0F) +0x20;			// Timer 1 als 8-Bit autoreload
   0373 74 0F              1191 	mov	a,#0x0F
   0375 55 89              1192 	anl	a,_TMOD
   0377 24 20              1193 	add	a,#0x20
   0379 F5 89              1194 	mov	_TMOD,a
                           1195 ;	../fb_lpc922_old.c:356: TH1=128;							// Timer 1 auf 104/3 us laden
   037B 75 8D 80           1196 	mov	_TH1,#0x80
                           1197 ;	../fb_lpc922_old.c:357: TL1=128;
   037E 75 8B 80           1198 	mov	_TL1,#0x80
                           1199 ;	../fb_lpc922_old.c:358: TF1=0;
   0381 C2 8F              1200 	clr	_TCON_7
                           1201 ;	../fb_lpc922_old.c:360: cs_pos=(telegramm[5]&0x0F)+7;		// Position der Checksum im Telegramm
   0383 74 0F              1202 	mov	a,#0x0F
   0385 55*09              1203 	anl	a,(_telegramm + 0x0005)
   0387 FA                 1204 	mov	r2,a
   0388 74 07              1205 	mov	a,#0x07
   038A 2A                 1206 	add	a,r2
   038B FA                 1207 	mov	r2,a
                           1208 ;	../fb_lpc922_old.c:361: cs=0xFF;
   038C 75*24 FF           1209 	mov	_cs,#0xFF
                           1210 ;	../fb_lpc922_old.c:362: for(n=0;n<cs_pos;n++) {
   038F 7B 00              1211 	mov	r3,#0x00
   0391                    1212 00101$:
   0391 C3                 1213 	clr	c
   0392 EB                 1214 	mov	a,r3
   0393 9A                 1215 	subb	a,r2
   0394 50 0B              1216 	jnc	00104$
                           1217 ;	../fb_lpc922_old.c:363: cs^=telegramm[n];				// Checksum berechnen
   0396 EB                 1218 	mov	a,r3
   0397 24r04              1219 	add	a,#_telegramm
   0399 F8                 1220 	mov	r0,a
   039A E6                 1221 	mov	a,@r0
   039B FC                 1222 	mov	r4,a
   039C 62*24              1223 	xrl	_cs,a
                           1224 ;	../fb_lpc922_old.c:362: for(n=0;n<cs_pos;n++) {
   039E 0B                 1225 	inc	r3
   039F 80 F0              1226 	sjmp	00101$
   03A1                    1227 00104$:
                           1228 ;	../fb_lpc922_old.c:365: telegramm[cs_pos]=cs;				// Checksum hinter Nutzdaten anfügen
   03A1 EA                 1229 	mov	a,r2
   03A2 24r04              1230 	add	a,#_telegramm
   03A4 F8                 1231 	mov	r0,a
   03A5 A6*24              1232 	mov	@r0,_cs
                           1233 ;	../fb_lpc922_old.c:366: ack=0;
   03A7 C2*03              1234 	clr	_ack
                           1235 ;	../fb_lpc922_old.c:367: nack=0;
   03A9 C2*04              1236 	clr	_nack
                           1237 ;	../fb_lpc922_old.c:368: wait_for_ack=1;
   03AB D2*0A              1238 	setb	_wait_for_ack
                           1239 ;	../fb_lpc922_old.c:370: fb_state=10;						// nächster state: senden
   03AD 75*27 0A           1240 	mov	_fb_state,#0x0A
                           1241 ;	../fb_lpc922_old.c:371: fb_pattern=0;						// nächstes zu sendendes Bit, 0=Startbit
   03B0 75*26 00           1242 	mov	_fb_pattern,#0x00
                           1243 ;	../fb_lpc922_old.c:372: telpos=0;							// nächstes zu sendende Byte
   03B3 75*23 00           1244 	mov	_telpos,#0x00
                           1245 ;	../fb_lpc922_old.c:373: IE1=0;								// ext. int1 Flag zurücksetzen
   03B6 C2 8B              1246 	clr	_TCON_3
                           1247 ;	../fb_lpc922_old.c:374: EX1=0;								// ext. int1 inaktiv
   03B8 C2 AA              1248 	clr	_IEN0_2
                           1249 ;	../fb_lpc922_old.c:375: TR1=1;								// Timer 1 starten
   03BA D2 8E              1250 	setb	_TCON_6
                           1251 ;	../fb_lpc922_old.c:377: ET1=1;								// Timer 1 int. aktiv
   03BC D2 AB              1252 	setb	_IEN0_3
   03BE 22                 1253 	ret
                           1254 ;------------------------------------------------------------
                           1255 ;Allocation info for local variables in function 'init_repeat_tx'
                           1256 ;------------------------------------------------------------
                           1257 ;------------------------------------------------------------
                           1258 ;	../fb_lpc922_old.c:381: void init_repeat_tx(void)		// Wiederholungssenden initiieren
                           1259 ;	-----------------------------------------
                           1260 ;	 function init_repeat_tx
                           1261 ;	-----------------------------------------
   03BF                    1262 _init_repeat_tx:
                           1263 ;	../fb_lpc922_old.c:383: fb_state=80;
   03BF 75*27 50           1264 	mov	_fb_state,#0x50
                           1265 ;	../fb_lpc922_old.c:384: IE1=0;
   03C2 C2 8B              1266 	clr	_TCON_3
                           1267 ;	../fb_lpc922_old.c:385: TR1=0;
   03C4 C2 8E              1268 	clr	_TCON_6
                           1269 ;	../fb_lpc922_old.c:386: ET1=0;
   03C6 C2 AB              1270 	clr	_IEN0_3
                           1271 ;	../fb_lpc922_old.c:387: cs=0;
   03C8 75*24 00           1272 	mov	_cs,#0x00
                           1273 ;	../fb_lpc922_old.c:388: telpos=0;
   03CB 75*23 00           1274 	mov	_telpos,#0x00
                           1275 ;	../fb_lpc922_old.c:389: TR1=0;
   03CE C2 8E              1276 	clr	_TCON_6
                           1277 ;	../fb_lpc922_old.c:390: TMOD=(TMOD & 0x0F) +0x10;	// Timer 1 als 16-Bit Timer
   03D0 74 0F              1278 	mov	a,#0x0F
   03D2 55 89              1279 	anl	a,_TMOD
   03D4 24 10              1280 	add	a,#0x10
   03D6 F5 89              1281 	mov	_TMOD,a
                           1282 ;	../fb_lpc922_old.c:391: TH1=0xB5;					// Timer 1 auf Busfrei-Position setzen
   03D8 75 8D B5           1283 	mov	_TH1,#0xB5
                           1284 ;	../fb_lpc922_old.c:392: TL1=0x1E;
   03DB 75 8B 1E           1285 	mov	_TL1,#0x1E
                           1286 ;	../fb_lpc922_old.c:393: TF1=0;
   03DE C2 8F              1287 	clr	_TCON_7
                           1288 ;	../fb_lpc922_old.c:394: TR1=1;
   03E0 D2 8E              1289 	setb	_TCON_6
                           1290 ;	../fb_lpc922_old.c:395: EX1=1;
   03E2 D2 AA              1291 	setb	_IEN0_2
                           1292 ;	../fb_lpc922_old.c:396: ET1=1;
   03E4 D2 AB              1293 	setb	_IEN0_3
                           1294 ;	../fb_lpc922_old.c:397: wait_for_ack=1;
   03E6 D2*0A              1295 	setb	_wait_for_ack
   03E8 22                 1296 	ret
                           1297 ;------------------------------------------------------------
                           1298 ;Allocation info for local variables in function 'gapos_in_gat'
                           1299 ;------------------------------------------------------------
                           1300 ;gal                       Allocated to stack - offset -3
                           1301 ;gah                       Allocated to registers r2 
                           1302 ;ga_position               Allocated to registers r3 
                           1303 ;n                         Allocated to registers 
                           1304 ;------------------------------------------------------------
                           1305 ;	../fb_lpc922_old.c:403: unsigned char gapos_in_gat(unsigned char gah, unsigned char gal)
                           1306 ;	-----------------------------------------
                           1307 ;	 function gapos_in_gat
                           1308 ;	-----------------------------------------
   03E9                    1309 _gapos_in_gat:
   03E9 C0*00              1310 	push	_bp
   03EB 85 81*00           1311 	mov	_bp,sp
   03EE AA 82              1312 	mov	r2,dpl
                           1313 ;	../fb_lpc922_old.c:407: ga_position=0xFF; 			// default return Wert 0xFF = nicht gefunden
   03F0 7B FF              1314 	mov	r3,#0xFF
                           1315 ;	../fb_lpc922_old.c:408: if (eeprom[ADDRTAB]) {
   03F2 90 1D 16           1316 	mov	dptr,#(_eeprom + 0x0016)
   03F5 E4                 1317 	clr	a
   03F6 93                 1318 	movc	a,@a+dptr
   03F7 60 30              1319 	jz	00105$
                           1320 ;	../fb_lpc922_old.c:409: for (n=1;n<=eeprom[ADDRTAB];n++) {
   03F9 7C 01              1321 	mov	r4,#0x01
   03FB                    1322 00106$:
   03FB 90 1D 16           1323 	mov	dptr,#(_eeprom + 0x0016)
   03FE E4                 1324 	clr	a
   03FF 93                 1325 	movc	a,@a+dptr
   0400 FD                 1326 	mov	r5,a
   0401 C3                 1327 	clr	c
   0402 9C                 1328 	subb	a,r4
   0403 40 24              1329 	jc	00105$
                           1330 ;	../fb_lpc922_old.c:410: if (gah==eeprom[ADDRTAB+n*2+1] && gal==eeprom[ADDRTAB+n*2+2]) ga_position=n;	// Berechnung in [] nicht in lokale var !!!
   0405 EC                 1331 	mov	a,r4
   0406 2C                 1332 	add	a,r4
   0407 FD                 1333 	mov	r5,a
   0408 24 17              1334 	add	a,#0x17
   040A 90 1D 00           1335 	mov	dptr,#_eeprom
   040D 93                 1336 	movc	a,@a+dptr
   040E FE                 1337 	mov	r6,a
   040F EA                 1338 	mov	a,r2
   0410 B5 06 13           1339 	cjne	a,ar6,00108$
   0413 74 18              1340 	mov	a,#0x18
   0415 2D                 1341 	add	a,r5
   0416 90 1D 00           1342 	mov	dptr,#_eeprom
   0419 93                 1343 	movc	a,@a+dptr
   041A FD                 1344 	mov	r5,a
   041B A8*00              1345 	mov	r0,_bp
   041D 18                 1346 	dec	r0
   041E 18                 1347 	dec	r0
   041F 18                 1348 	dec	r0
   0420 E6                 1349 	mov	a,@r0
   0421 B5 05 02           1350 	cjne	a,ar5,00108$
   0424 8C 03              1351 	mov	ar3,r4
   0426                    1352 00108$:
                           1353 ;	../fb_lpc922_old.c:409: for (n=1;n<=eeprom[ADDRTAB];n++) {
   0426 0C                 1354 	inc	r4
   0427 80 D2              1355 	sjmp	00106$
   0429                    1356 00105$:
                           1357 ;	../fb_lpc922_old.c:413: return (ga_position);
   0429 8B 82              1358 	mov	dpl,r3
   042B D0*00              1359 	pop	_bp
   042D 22                 1360 	ret
                           1361 ;------------------------------------------------------------
                           1362 ;Allocation info for local variables in function 'build_tel'
                           1363 ;------------------------------------------------------------
                           1364 ;objno                     Allocated to registers r2 
                           1365 ;build_ok                  Allocated to registers b0 
                           1366 ;objvalue                  Allocated to stack - offset 1
                           1367 ;ga                        Allocated to registers r4 r3 
                           1368 ;objtype                   Allocated to registers r3 
                           1369 ;n                         Allocated to registers r2 
                           1370 ;length                    Allocated to registers r3 
                           1371 ;type                      Allocated to registers b1 
                           1372 ;------------------------------------------------------------
                           1373 ;	../fb_lpc922_old.c:419: bit build_tel(unsigned char objno)
                           1374 ;	-----------------------------------------
                           1375 ;	 function build_tel
                           1376 ;	-----------------------------------------
   042E                    1377 _build_tel:
   042E C0*00              1378 	push	_bp
   0430 E5 81              1379 	mov	a,sp
   0432 F5*00              1380 	mov	_bp,a
   0434 24 04              1381 	add	a,#0x04
   0436 F5 81              1382 	mov	sp,a
   0438 AA 82              1383 	mov	r2,dpl
                           1384 ;	../fb_lpc922_old.c:421: bit build_ok=0;
   043A C2*00              1385 	clr	b0
                           1386 ;	../fb_lpc922_old.c:428: if(objno<128) {		// Multicast
   043C BA 80 00           1387 	cjne	r2,#0x80,00158$
   043F                    1388 00158$:
   043F 40 03              1389 	jc	00159$
   0441 02s05r3B           1390 	ljmp	00132$
   0444                    1391 00159$:
                           1392 ;	../fb_lpc922_old.c:429: if(objno&0x40) type=1; else type=0;
   0444 EA                 1393 	mov	a,r2
   0445 30 E6 04           1394 	jnb	acc.6,00102$
   0448 D2*00              1395 	setb	b1
   044A 80 02              1396 	sjmp	00103$
   044C                    1397 00102$:
   044C C2*00              1398 	clr	b1
   044E                    1399 00103$:
                           1400 ;	../fb_lpc922_old.c:430: objno&=0x1F;
   044E 53 02 1F           1401 	anl	ar2,#0x1F
                           1402 ;	../fb_lpc922_old.c:432: objvalue=read_obj_value(objno);		// Objektwert aus USER-RAM lesen (Standard Einstellung)
   0451 8A 82              1403 	mov	dpl,r2
   0453 C0 02              1404 	push	ar2
   0455 C0*00              1405 	push	bits
   0457 12s00r00           1406 	lcall	_read_obj_value
   045A AB 82              1407 	mov	r3,dpl
   045C AC 83              1408 	mov	r4,dph
   045E AD F0              1409 	mov	r5,b
   0460 FE                 1410 	mov	r6,a
   0461 D0*00              1411 	pop	bits
   0463 D0 02              1412 	pop	ar2
   0465 A8*00              1413 	mov	r0,_bp
   0467 08                 1414 	inc	r0
   0468 A6 03              1415 	mov	@r0,ar3
   046A 08                 1416 	inc	r0
   046B A6 04              1417 	mov	@r0,ar4
   046D 08                 1418 	inc	r0
   046E A6 05              1419 	mov	@r0,ar5
   0470 08                 1420 	inc	r0
   0471 A6 06              1421 	mov	@r0,ar6
                           1422 ;	../fb_lpc922_old.c:434: ga=find_ga(objno);					// wenn keine Gruppenadresse hintrlegt nix tun
   0473 8A 82              1423 	mov	dpl,r2
   0475 C0 02              1424 	push	ar2
   0477 C0*00              1425 	push	bits
   0479 12s08r98           1426 	lcall	_find_ga
   047C AF 82              1427 	mov	r7,dpl
   047E AB 83              1428 	mov	r3,dph
   0480 D0*00              1429 	pop	bits
   0482 D0 02              1430 	pop	ar2
   0484 8F 04              1431 	mov	ar4,r7
                           1432 ;	../fb_lpc922_old.c:436: if (ga!=0)
   0486 EC                 1433 	mov	a,r4
   0487 4B                 1434 	orl	a,r3
   0488 70 03              1435 	jnz	00161$
   048A 02s06r11           1436 	ljmp	00133$
   048D                    1437 00161$:
                           1438 ;	../fb_lpc922_old.c:438: telegramm[0]=0xBC;
   048D 75*04 BC           1439 	mov	_telegramm,#0xBC
                           1440 ;	../fb_lpc922_old.c:439: telegramm[1]=eeprom[ADDRTAB+1];
   0490 90 1D 17           1441 	mov	dptr,#(_eeprom + 0x0017)
   0493 E4                 1442 	clr	a
   0494 93                 1443 	movc	a,@a+dptr
   0495 FD                 1444 	mov	r5,a
   0496 8D*05              1445 	mov	(_telegramm + 0x0001),r5
                           1446 ;	../fb_lpc922_old.c:440: telegramm[2]=eeprom[ADDRTAB+2];
   0498 90 1D 18           1447 	mov	dptr,#(_eeprom + 0x0018)
   049B E4                 1448 	clr	a
   049C 93                 1449 	movc	a,@a+dptr
   049D FD                 1450 	mov	r5,a
   049E 8D*06              1451 	mov	(_telegramm + 0x0002),r5
                           1452 ;	../fb_lpc922_old.c:441: telegramm[3]=ga>>8;
   04A0 8B 05              1453 	mov	ar5,r3
   04A2 8D*07              1454 	mov	(_telegramm + 0x0003),r5
                           1455 ;	../fb_lpc922_old.c:442: telegramm[4]=ga;
   04A4 8C*08              1456 	mov	(_telegramm + 0x0004),r4
                           1457 ;	../fb_lpc922_old.c:443: telegramm[6]=0x00;
   04A6 75*0A 00           1458 	mov	(_telegramm + 0x0006),#0x00
                           1459 ;	../fb_lpc922_old.c:444: if (type) telegramm[7]=0x40;		// read_value_response Telegramm (angefordert)
   04A9 30*00 05           1460 	jnb	b1,00105$
   04AC 75*0B 40           1461 	mov	(_telegramm + 0x0007),#0x40
   04AF 80 03              1462 	sjmp	00106$
   04B1                    1463 00105$:
                           1464 ;	../fb_lpc922_old.c:445: else telegramm[7]=0x80;				// write_value_request Telegramm (nicht angefordert)
   04B1 75*0B 80           1465 	mov	(_telegramm + 0x0007),#0x80
   04B4                    1466 00106$:
                           1467 ;	../fb_lpc922_old.c:447: objtype=eeprom[eeprom[COMMSTABPTR]+objno*3+4];
   04B4 90 1D 12           1468 	mov	dptr,#(_eeprom + 0x0012)
   04B7 E4                 1469 	clr	a
   04B8 93                 1470 	movc	a,@a+dptr
   04B9 FB                 1471 	mov	r3,a
   04BA EA                 1472 	mov	a,r2
   04BB 75 F0 03           1473 	mov	b,#0x03
   04BE A4                 1474 	mul	ab
   04BF 2B                 1475 	add	a,r3
   04C0 24 04              1476 	add	a,#0x04+_eeprom
   04C2 F5 82              1477 	mov	dpl,a
   04C4 E4                 1478 	clr	a
   04C5 34 1D              1479 	addc	a,#(_eeprom >> 8)
   04C7 F5 83              1480 	mov	dph,a
   04C9 E4                 1481 	clr	a
   04CA 93                 1482 	movc	a,@a+dptr
                           1483 ;	../fb_lpc922_old.c:449: if(objtype>6) length=objtype-5; else length=1;
   04CB FB                 1484 	mov  r3,a
   04CC 24 F9              1485 	add	a,#0xff - 0x06
   04CE 50 06              1486 	jnc	00108$
   04D0 EB                 1487 	mov	a,r3
   04D1 24 FB              1488 	add	a,#0xfb
   04D3 FB                 1489 	mov	r3,a
   04D4 80 02              1490 	sjmp	00109$
   04D6                    1491 00108$:
   04D6 7B 01              1492 	mov	r3,#0x01
   04D8                    1493 00109$:
                           1494 ;	../fb_lpc922_old.c:450: telegramm[5]=0xE0+length;
   04D8 74 E0              1495 	mov	a,#0xE0
   04DA 2B                 1496 	add	a,r3
   04DB F5*09              1497 	mov	(_telegramm + 0x0005),a
                           1498 ;	../fb_lpc922_old.c:451: if (length>1) telegramm[length+6]=objvalue; else telegramm[7]+=objvalue;
   04DD EB                 1499 	mov	a,r3
   04DE 24 FE              1500 	add	a,#0xff - 0x01
   04E0 50 0F              1501 	jnc	00111$
   04E2 74 06              1502 	mov	a,#0x06
   04E4 2B                 1503 	add	a,r3
   04E5 24r04              1504 	add	a,#_telegramm
   04E7 F8                 1505 	mov	r0,a
   04E8 A9*00              1506 	mov	r1,_bp
   04EA 09                 1507 	inc	r1
   04EB 87 04              1508 	mov	ar4,@r1
   04ED A6 04              1509 	mov	@r0,ar4
   04EF 80 09              1510 	sjmp	00112$
   04F1                    1511 00111$:
   04F1 A8*00              1512 	mov	r0,_bp
   04F3 08                 1513 	inc	r0
   04F4 E6                 1514 	mov	a,@r0
   04F5 FC                 1515 	mov	r4,a
   04F6 25*0B              1516 	add	a,(_telegramm + 0x0007)
   04F8 F5*0B              1517 	mov	(_telegramm + 0x0007),a
   04FA                    1518 00112$:
                           1519 ;	../fb_lpc922_old.c:452: if (length>2) telegramm[length+5]=objvalue>>8;
   04FA EB                 1520 	mov	a,r3
   04FB 24 FD              1521 	add	a,#0xff - 0x02
   04FD 50 0E              1522 	jnc	00114$
   04FF 74 05              1523 	mov	a,#0x05
   0501 2B                 1524 	add	a,r3
   0502 24r04              1525 	add	a,#_telegramm
   0504 F8                 1526 	mov	r0,a
   0505 A9*00              1527 	mov	r1,_bp
   0507 09                 1528 	inc	r1
   0508 09                 1529 	inc	r1
   0509 87 04              1530 	mov	ar4,@r1
   050B A6 04              1531 	mov	@r0,ar4
   050D                    1532 00114$:
                           1533 ;	../fb_lpc922_old.c:453: if (length>3) telegramm[length+4]=objvalue>>16;
   050D EB                 1534 	mov	a,r3
   050E 24 FC              1535 	add	a,#0xff - 0x03
   0510 50 0F              1536 	jnc	00116$
   0512 74 04              1537 	mov	a,#0x04
   0514 2B                 1538 	add	a,r3
   0515 24r04              1539 	add	a,#_telegramm
   0517 F8                 1540 	mov	r0,a
   0518 A9*00              1541 	mov	r1,_bp
   051A 09                 1542 	inc	r1
   051B 09                 1543 	inc	r1
   051C 09                 1544 	inc	r1
   051D 87 04              1545 	mov	ar4,@r1
   051F A6 04              1546 	mov	@r0,ar4
   0521                    1547 00116$:
                           1548 ;	../fb_lpc922_old.c:454: if (length>4) telegramm[length+3]=objvalue>>24;
   0521 EB                 1549 	mov	a,r3
   0522 24 FB              1550 	add	a,#0xff - 0x04
   0524 50 10              1551 	jnc	00118$
   0526 74 03              1552 	mov	a,#0x03
   0528 2B                 1553 	add	a,r3
   0529 24r04              1554 	add	a,#_telegramm
   052B F8                 1555 	mov	r0,a
   052C A9*00              1556 	mov	r1,_bp
   052E 09                 1557 	inc	r1
   052F 09                 1558 	inc	r1
   0530 09                 1559 	inc	r1
   0531 09                 1560 	inc	r1
   0532 87 03              1561 	mov	ar3,@r1
   0534 A6 03              1562 	mov	@r0,ar3
   0536                    1563 00118$:
                           1564 ;	../fb_lpc922_old.c:456: build_ok=1;
   0536 D2*00              1565 	setb	b0
   0538 02s06r11           1566 	ljmp	00133$
   053B                    1567 00132$:
                           1568 ;	../fb_lpc922_old.c:460: telegramm[0]=0xB0;				// Control Byte
   053B 75*04 B0           1569 	mov	_telegramm,#0xB0
                           1570 ;	../fb_lpc922_old.c:461: telegramm[1]=eeprom[ADDRTAB+1];	// Quelladresse ist phys. Adresse
   053E 90 1D 17           1571 	mov	dptr,#(_eeprom + 0x0017)
   0541 E4                 1572 	clr	a
   0542 93                 1573 	movc	a,@a+dptr
   0543 FB                 1574 	mov	r3,a
   0544 8B*05              1575 	mov	(_telegramm + 0x0001),r3
                           1576 ;	../fb_lpc922_old.c:462: telegramm[2]=eeprom[ADDRTAB+2];
   0546 90 1D 18           1577 	mov	dptr,#(_eeprom + 0x0018)
   0549 E4                 1578 	clr	a
   054A 93                 1579 	movc	a,@a+dptr
   054B FB                 1580 	mov	r3,a
   054C 8B*06              1581 	mov	(_telegramm + 0x0002),r3
                           1582 ;	../fb_lpc922_old.c:463: telegramm[3]=conh;
   054E 85*00*07           1583 	mov	(_telegramm + 0x0003),_conh
                           1584 ;	../fb_lpc922_old.c:464: telegramm[4]=conl;
   0551 85*01*08           1585 	mov	(_telegramm + 0x0004),_conl
                           1586 ;	../fb_lpc922_old.c:466: switch(objno&0x1F) {
   0554 53 02 1F           1587 	anl	ar2,#0x1F
   0557 BA 01 02           1588 	cjne	r2,#0x01,00168$
   055A 80 12              1589 	sjmp	00121$
   055C                    1590 00168$:
   055C BA 02 02           1591 	cjne	r2,#0x02,00169$
   055F 80 1B              1592 	sjmp	00122$
   0561                    1593 00169$:
   0561 BA 03 02           1594 	cjne	r2,#0x03,00170$
   0564 80 34              1595 	sjmp	00123$
   0566                    1596 00170$:
   0566 BA 04 02           1597 	cjne	r2,#0x04,00171$
   0569 80 40              1598 	sjmp	00156$
   056B                    1599 00171$:
   056B 02s06r0F           1600 	ljmp	00130$
                           1601 ;	../fb_lpc922_old.c:467: case 1:	// NCD ACK Quittierung
   056E                    1602 00121$:
                           1603 ;	../fb_lpc922_old.c:468: telegramm[5]=0x60;				// DRL
   056E 75*09 60           1604 	mov	(_telegramm + 0x0005),#0x60
                           1605 ;	../fb_lpc922_old.c:469: telegramm[6]=(telegramm[6]&0x3C) + 0xC2;		// Bit 6,7(TCPI = 11 NCD Quittierung) und Bit 0,1 (10=ACK)
   0571 74 3C              1606 	mov	a,#0x3C
   0573 55*0A              1607 	anl	a,(_telegramm + 0x0006)
   0575 24 C2              1608 	add	a,#0xC2
   0577 F5*0A              1609 	mov	(_telegramm + 0x0006),a
                           1610 ;	../fb_lpc922_old.c:470: break;
   0579 02s06r0F           1611 	ljmp	00130$
                           1612 ;	../fb_lpc922_old.c:471: case 2:	// read mask response
   057C                    1613 00122$:
                           1614 ;	../fb_lpc922_old.c:472: telegramm[5]=0x63;			// DRL
   057C 75*09 63           1615 	mov	(_telegramm + 0x0005),#0x63
                           1616 ;	../fb_lpc922_old.c:473: telegramm[6]=pcount + 0x43;
   057F 74 43              1617 	mov	a,#0x43
   0581 25*02              1618 	add	a,_pcount
   0583 F5*0A              1619 	mov	(_telegramm + 0x0006),a
                           1620 ;	../fb_lpc922_old.c:474: telegramm[7]=0x40;
   0585 75*0B 40           1621 	mov	(_telegramm + 0x0007),#0x40
                           1622 ;	../fb_lpc922_old.c:475: telegramm[8]=0x00;
   0588 75*0C 00           1623 	mov	(_telegramm + 0x0008),#0x00
                           1624 ;	../fb_lpc922_old.c:476: telegramm[9]=0x12;			// Maskenversion 1 = BCU1
   058B 75*0D 12           1625 	mov	(_telegramm + 0x0009),#0x12
                           1626 ;	../fb_lpc922_old.c:477: pcount+=4;
   058E E5*02              1627 	mov	a,_pcount
   0590 24 04              1628 	add	a,#0x04
   0592 F5*02              1629 	mov	_pcount,a
                           1630 ;	../fb_lpc922_old.c:478: pcount&=0x3C;
   0594 53r02 3C           1631 	anl	_pcount,#0x3C
                           1632 ;	../fb_lpc922_old.c:479: break;
   0597 02s06r0F           1633 	ljmp	00130$
                           1634 ;	../fb_lpc922_old.c:480: case 3:	// read PA response
   059A                    1635 00123$:
                           1636 ;	../fb_lpc922_old.c:481: telegramm[3]=0x00;			// Zieladresse auf 0000, da Broadcast
   059A 75*07 00           1637 	mov	(_telegramm + 0x0003),#0x00
                           1638 ;	../fb_lpc922_old.c:482: telegramm[4]=0x00;
   059D 75*08 00           1639 	mov	(_telegramm + 0x0004),#0x00
                           1640 ;	../fb_lpc922_old.c:483: telegramm[5]=0xE1;			// DRL
   05A0 75*09 E1           1641 	mov	(_telegramm + 0x0005),#0xE1
                           1642 ;	../fb_lpc922_old.c:484: telegramm[6]=0x01;
   05A3 75*0A 01           1643 	mov	(_telegramm + 0x0006),#0x01
                           1644 ;	../fb_lpc922_old.c:485: telegramm[7]=0x40;
   05A6 75*0B 40           1645 	mov	(_telegramm + 0x0007),#0x40
                           1646 ;	../fb_lpc922_old.c:486: break;
                           1647 ;	../fb_lpc922_old.c:488: for(n=0;n<mem_length;n++) {
   05A9 80 64              1648 	sjmp	00130$
   05AB                    1649 00156$:
   05AB 7A 00              1650 	mov	r2,#0x00
   05AD                    1651 00134$:
   05AD C3                 1652 	clr	c
   05AE EA                 1653 	mov	a,r2
   05AF 95*03              1654 	subb	a,_mem_length
   05B1 50 41              1655 	jnc	00137$
                           1656 ;	../fb_lpc922_old.c:489: if (telegramm[8]==0) {
   05B3 E5*0C              1657 	mov	a,(_telegramm + 0x0008)
   05B5 70 2B              1658 	jnz	00128$
                           1659 ;	../fb_lpc922_old.c:490: telegramm[n+10]=userram[telegramm[9]+n];
   05B7 74 0A              1660 	mov	a,#0x0A
   05B9 2A                 1661 	add	a,r2
   05BA 24r04              1662 	add	a,#_telegramm
   05BC F8                 1663 	mov	r0,a
   05BD AB*0D              1664 	mov	r3,(_telegramm + 0x0009)
   05BF EA                 1665 	mov	a,r2
   05C0 2B                 1666 	add	a,r3
   05C1 90 1C 00           1667 	mov	dptr,#_userram
   05C4 93                 1668 	movc	a,@a+dptr
   05C5 F6                 1669 	mov	@r0,a
                           1670 ;	../fb_lpc922_old.c:491: if(telegramm[9]+n==0x60) telegramm[n+10]=status60;	// ausser bei 0x60
   05C6 7C 00              1671 	mov	r4,#0x00
   05C8 8A 05              1672 	mov	ar5,r2
   05CA 7E 00              1673 	mov	r6,#0x00
   05CC ED                 1674 	mov	a,r5
   05CD 2B                 1675 	add	a,r3
   05CE FB                 1676 	mov	r3,a
   05CF EE                 1677 	mov	a,r6
   05D0 3C                 1678 	addc	a,r4
   05D1 FC                 1679 	mov	r4,a
   05D2 BB 60 1C           1680 	cjne	r3,#0x60,00136$
   05D5 BC 00 19           1681 	cjne	r4,#0x00,00136$
   05D8 74 0A              1682 	mov	a,#0x0A
   05DA 2A                 1683 	add	a,r2
   05DB 24r04              1684 	add	a,#_telegramm
   05DD F8                 1685 	mov	r0,a
   05DE A6*2C              1686 	mov	@r0,_status60
   05E0 80 0F              1687 	sjmp	00136$
   05E2                    1688 00128$:
                           1689 ;	../fb_lpc922_old.c:493: else telegramm[n+10]=eeprom[telegramm[9]+n];
   05E2 74 0A              1690 	mov	a,#0x0A
   05E4 2A                 1691 	add	a,r2
   05E5 24r04              1692 	add	a,#_telegramm
   05E7 F8                 1693 	mov	r0,a
   05E8 EA                 1694 	mov	a,r2
   05E9 25*0D              1695 	add	a,(_telegramm + 0x0009)
   05EB 90 1D 00           1696 	mov	dptr,#_eeprom
   05EE 93                 1697 	movc	a,@a+dptr
   05EF FB                 1698 	mov	r3,a
   05F0 F6                 1699 	mov	@r0,a
   05F1                    1700 00136$:
                           1701 ;	../fb_lpc922_old.c:488: for(n=0;n<mem_length;n++) {
   05F1 0A                 1702 	inc	r2
   05F2 80 B9              1703 	sjmp	00134$
   05F4                    1704 00137$:
                           1705 ;	../fb_lpc922_old.c:495: telegramm[5]=mem_length+0x63;		// DRL (Anzahl Bytes + 3)
   05F4 74 63              1706 	mov	a,#0x63
   05F6 25*03              1707 	add	a,_mem_length
   05F8 F5*09              1708 	mov	(_telegramm + 0x0005),a
                           1709 ;	../fb_lpc922_old.c:496: telegramm[6]=pcount|0x42;			// Paketzaehler, TCPI und ersten beiden Befehlsbits
   05FA 74 42              1710 	mov	a,#0x42
   05FC 45*02              1711 	orl	a,_pcount
   05FE F5*0A              1712 	mov	(_telegramm + 0x0006),a
                           1713 ;	../fb_lpc922_old.c:497: telegramm[7]=mem_length|0x40;		// letzten 2 Befehlsbits
   0600 74 40              1714 	mov	a,#0x40
   0602 45*03              1715 	orl	a,_mem_length
   0604 F5*0B              1716 	mov	(_telegramm + 0x0007),a
                           1717 ;	../fb_lpc922_old.c:498: pcount+=4;
   0606 E5*02              1718 	mov	a,_pcount
   0608 24 04              1719 	add	a,#0x04
   060A F5*02              1720 	mov	_pcount,a
                           1721 ;	../fb_lpc922_old.c:499: pcount&=0x3C;
   060C 53r02 3C           1722 	anl	_pcount,#0x3C
                           1723 ;	../fb_lpc922_old.c:501: }
   060F                    1724 00130$:
                           1725 ;	../fb_lpc922_old.c:502: build_ok=1;
   060F D2*00              1726 	setb	b0
   0611                    1727 00133$:
                           1728 ;	../fb_lpc922_old.c:504: return(build_ok);
   0611 A2*00              1729 	mov	c,b0
   0613 85*00 81           1730 	mov	sp,_bp
   0616 D0*00              1731 	pop	_bp
   0618 22                 1732 	ret
                           1733 ;------------------------------------------------------------
                           1734 ;Allocation info for local variables in function 'send_obj_value'
                           1735 ;------------------------------------------------------------
                           1736 ;objno                     Allocated to registers r2 
                           1737 ;------------------------------------------------------------
                           1738 ;	../fb_lpc922_old.c:508: void send_obj_value(unsigned char objno)
                           1739 ;	-----------------------------------------
                           1740 ;	 function send_obj_value
                           1741 ;	-----------------------------------------
   0619                    1742 _send_obj_value:
   0619 AA 82              1743 	mov	r2,dpl
                           1744 ;	../fb_lpc922_old.c:510: tx_buffer[tx_nextwrite]=objno;
   061B E5*2A              1745 	mov	a,_tx_nextwrite
   061D 24r1B              1746 	add	a,#_tx_buffer
   061F F8                 1747 	mov	r0,a
   0620 A6 02              1748 	mov	@r0,ar2
                           1749 ;	../fb_lpc922_old.c:511: tx_nextwrite++;
   0622 05*2A              1750 	inc	_tx_nextwrite
                           1751 ;	../fb_lpc922_old.c:512: tx_nextwrite&=0x07;
   0624 53r2A 07           1752 	anl	_tx_nextwrite,#0x07
                           1753 ;	../fb_lpc922_old.c:513: TR1=1;	// statemachine starten falls vorher in state 0 gestoppt
   0627 D2 8E              1754 	setb	_TCON_6
   0629 22                 1755 	ret
                           1756 ;------------------------------------------------------------
                           1757 ;Allocation info for local variables in function 'process_tel'
                           1758 ;------------------------------------------------------------
                           1759 ;tpdu                      Allocated to registers r2 
                           1760 ;------------------------------------------------------------
                           1761 ;	../fb_lpc922_old.c:519: void process_tel(void)
                           1762 ;	-----------------------------------------
                           1763 ;	 function process_tel
                           1764 ;	-----------------------------------------
   062A                    1765 _process_tel:
                           1766 ;	../fb_lpc922_old.c:523: tel_arrived=0;
   062A C2*06              1767 	clr	_tel_arrived
                           1768 ;	../fb_lpc922_old.c:524: tpdu=telegramm[6]&0xC3;
   062C 74 C3              1769 	mov	a,#0xC3
   062E 55*0A              1770 	anl	a,(_telegramm + 0x0006)
   0630 FA                 1771 	mov	r2,a
                           1772 ;	../fb_lpc922_old.c:528: if(telegramm[3]==0 && telegramm[4]==0) {
   0631 E5*07              1773 	mov	a,(_telegramm + 0x0003)
   0633 FB                 1774 	mov	r3,a
   0634 70 33              1775 	jnz	00144$
   0636 E5*08              1776 	mov	a,(_telegramm + 0x0004)
   0638 70 2F              1777 	jnz	00144$
                           1778 ;	../fb_lpc922_old.c:529: if(status60 & 0x01) {		// prog mode
   063A E5*2C              1779 	mov	a,_status60
   063C 20 E0 03           1780 	jb	acc.0,00177$
   063F 02s07r2A           1781 	ljmp	00145$
   0642                    1782 00177$:
                           1783 ;	../fb_lpc922_old.c:530: if(tpdu==0x00 && telegramm[7]==0xC0) set_pa();				// set_pa_req
   0642 EA                 1784 	mov	a,r2
   0643 70 0C              1785 	jnz	00102$
   0645 74 C0              1786 	mov	a,#0xC0
   0647 B5*0B 07           1787 	cjne	a,(_telegramm + 0x0007),00102$
   064A C0 02              1788 	push	ar2
   064C 12s08r0C           1789 	lcall	_set_pa
   064F D0 02              1790 	pop	ar2
   0651                    1791 00102$:
                           1792 ;	../fb_lpc922_old.c:531: if(tpdu==0x01 && telegramm[7]==0x00) send_obj_value(131);	// read_pa_req
   0651 BA 01 02           1793 	cjne	r2,#0x01,00181$
   0654 80 03              1794 	sjmp	00182$
   0656                    1795 00181$:
   0656 02s07r2A           1796 	ljmp	00145$
   0659                    1797 00182$:
   0659 E5*0B              1798 	mov	a,(_telegramm + 0x0007)
   065B 60 03              1799 	jz	00183$
   065D 02s07r2A           1800 	ljmp	00145$
   0660                    1801 00183$:
   0660 75 82 83           1802 	mov	dpl,#0x83
   0663 12s06r19           1803 	lcall	_send_obj_value
   0666 02s07r2A           1804 	ljmp	00145$
   0669                    1805 00144$:
                           1806 ;	../fb_lpc922_old.c:536: if((telegramm[5]&0x80)==0x00) {	// Destination Adress Flag = Bit 7, 0=phys. Adr., 1=Gruppenadr.
   0669 E5*09              1807 	mov	a,(_telegramm + 0x0005)
   066B 30 E7 03           1808 	jnb	acc.7,00184$
   066E 02s07r15           1809 	ljmp	00141$
   0671                    1810 00184$:
                           1811 ;	../fb_lpc922_old.c:537: if(telegramm[3]==eeprom[ADDRTAB+1] && telegramm[4]==eeprom[ADDRTAB+2]) {	// nur wenn es die eigene phys. Adr. ist
   0671 90 1D 17           1812 	mov	dptr,#(_eeprom + 0x0017)
   0674 E4                 1813 	clr	a
   0675 93                 1814 	movc	a,@a+dptr
   0676 FC                 1815 	mov	r4,a
   0677 EB                 1816 	mov	a,r3
   0678 B5 04 02           1817 	cjne	a,ar4,00185$
   067B 80 03              1818 	sjmp	00186$
   067D                    1819 00185$:
   067D 02s07r2A           1820 	ljmp	00145$
   0680                    1821 00186$:
   0680 90 1D 18           1822 	mov	dptr,#(_eeprom + 0x0018)
   0683 E4                 1823 	clr	a
   0684 93                 1824 	movc	a,@a+dptr
   0685 FB                 1825 	mov	r3,a
   0686 B5*08 02           1826 	cjne	a,(_telegramm + 0x0004),00187$
   0689 80 03              1827 	sjmp	00188$
   068B                    1828 00187$:
   068B 02s07r2A           1829 	ljmp	00145$
   068E                    1830 00188$:
                           1831 ;	../fb_lpc922_old.c:540: switch (tpdu) {	// transport layer control field
   068E BA 42 02           1832 	cjne	r2,#0x42,00189$
   0691 80 12              1833 	sjmp	00109$
   0693                    1834 00189$:
   0693 BA 43 02           1835 	cjne	r2,#0x43,00190$
   0696 80 38              1836 	sjmp	00114$
   0698                    1837 00190$:
   0698 BA 80 02           1838 	cjne	r2,#0x80,00191$
   069B 80 54              1839 	sjmp	00122$
   069D                    1840 00191$:
   069D BA 81 02           1841 	cjne	r2,#0x81,00192$
   06A0 80 5F              1842 	sjmp	00125$
   06A2                    1843 00192$:
   06A2 02s07r2A           1844 	ljmp	00145$
                           1845 ;	../fb_lpc922_old.c:542: case 0x42:	// Data PDU - memory operations
   06A5                    1846 00109$:
                           1847 ;	../fb_lpc922_old.c:543: if((telegramm[7]&0xC0)==0x80) {	// write_memory_request
   06A5 74 C0              1848 	mov	a,#0xC0
   06A7 55*0B              1849 	anl	a,(_telegramm + 0x0007)
   06A9 FB                 1850 	mov	r3,a
   06AA BB 80 09           1851 	cjne	r3,#0x80,00111$
                           1852 ;	../fb_lpc922_old.c:544: send_obj_value(129);		// ncd ack
   06AD 75 82 81           1853 	mov	dpl,#0x81
   06B0 12s06r19           1854 	lcall	_send_obj_value
                           1855 ;	../fb_lpc922_old.c:545: write_memory();
   06B3 12s07r2E           1856 	lcall	_write_memory
   06B6                    1857 00111$:
                           1858 ;	../fb_lpc922_old.c:547: if((telegramm[7]&0xC0)==0x00) {					// read_memory_request
   06B6 E5*0B              1859 	mov	a,(_telegramm + 0x0007)
   06B8 FB                 1860 	mov	r3,a
   06B9 54 C0              1861 	anl	a,#0xC0
   06BB 60 03              1862 	jz	00196$
   06BD 02s07r2A           1863 	ljmp	00145$
   06C0                    1864 00196$:
                           1865 ;	../fb_lpc922_old.c:548: mem_length=telegramm[7];					// Anzahl Bytes
   06C0 8B*03              1866 	mov	_mem_length,r3
                           1867 ;	../fb_lpc922_old.c:549: send_obj_value(129);						// ncd ack
   06C2 75 82 81           1868 	mov	dpl,#0x81
   06C5 12s06r19           1869 	lcall	_send_obj_value
                           1870 ;	../fb_lpc922_old.c:550: send_obj_value(132);
   06C8 75 82 84           1871 	mov	dpl,#0x84
   06CB 12s06r19           1872 	lcall	_send_obj_value
                           1873 ;	../fb_lpc922_old.c:552: break;
                           1874 ;	../fb_lpc922_old.c:554: case 0x43:	// Data PDU - misc.
   06CE 80 5A              1875 	sjmp	00145$
   06D0                    1876 00114$:
                           1877 ;	../fb_lpc922_old.c:555: if(telegramm[7]==0x80) {		// restart request
   06D0 74 80              1878 	mov	a,#0x80
   06D2 B5*0B 0A           1879 	cjne	a,(_telegramm + 0x0007),00119$
                           1880 ;	../fb_lpc922_old.c:556: while(fb_state!=0);			// warten bis Senden abgeschlossen
   06D5                    1881 00115$:
   06D5 E5*27              1882 	mov	a,_fb_state
   06D7 70 FC              1883 	jnz	00115$
                           1884 ;	../fb_lpc922_old.c:557: restart_hw();				// Hardware zuruecksetzen
   06D9 12s08rE4           1885 	lcall	_restart_hw
                           1886 ;	../fb_lpc922_old.c:558: restart_app();				// Anwendungsspezifische Einstellungen zuruecksetzen
   06DC 12s00r00           1887 	lcall	_restart_app
   06DF                    1888 00119$:
                           1889 ;	../fb_lpc922_old.c:560: if(telegramm[7]==0x00) {		// read_mask_version_request
   06DF E5*0B              1890 	mov	a,(_telegramm + 0x0007)
   06E1 70 47              1891 	jnz	00145$
                           1892 ;	../fb_lpc922_old.c:561: send_obj_value(129);		// NCD Quittierung senden (ACK)
   06E3 75 82 81           1893 	mov	dpl,#0x81
   06E6 12s06r19           1894 	lcall	_send_obj_value
                           1895 ;	../fb_lpc922_old.c:562: send_obj_value(130);		// Maskenversion response
   06E9 75 82 82           1896 	mov	dpl,#0x82
   06EC 12s06r19           1897 	lcall	_send_obj_value
                           1898 ;	../fb_lpc922_old.c:564: break;
                           1899 ;	../fb_lpc922_old.c:566: case 0x80:	// UCD Verbindungsaufbau
   06EF 80 39              1900 	sjmp	00145$
   06F1                    1901 00122$:
                           1902 ;	../fb_lpc922_old.c:567: if(!connected) {				// wenn bereits verbunden: ignorieren
   06F1 20*0E 36           1903 	jb	_connected,00145$
                           1904 ;	../fb_lpc922_old.c:568: connected=1;
   06F4 D2*0E              1905 	setb	_connected
                           1906 ;	../fb_lpc922_old.c:569: conh=telegramm[1];			// phys. Adresse des Verbindungspartners
   06F6 85*05*00           1907 	mov	_conh,(_telegramm + 0x0001)
                           1908 ;	../fb_lpc922_old.c:570: conl=telegramm[2];
   06F9 85*06*01           1909 	mov	_conl,(_telegramm + 0x0002)
                           1910 ;	../fb_lpc922_old.c:571: pcount=0;					// Paketzaehler zuruecksetzen
   06FC 75*02 00           1911 	mov	_pcount,#0x00
                           1912 ;	../fb_lpc922_old.c:573: break;
                           1913 ;	../fb_lpc922_old.c:575: case 0x81:	// UCD Verbindungsabbau
   06FF 80 29              1914 	sjmp	00145$
   0701                    1915 00125$:
                           1916 ;	../fb_lpc922_old.c:576: if(conh==telegramm[1] && conl==telegramm[2] && connected)	{	// nur abbauen, wenn verbunden und Anforderung vom Verbindungspartner, kein ACK senden
   0701 E5*05              1917 	mov	a,(_telegramm + 0x0001)
   0703 B5*00 24           1918 	cjne	a,_conh,00145$
   0706 E5*06              1919 	mov	a,(_telegramm + 0x0002)
   0708 B5*01 1F           1920 	cjne	a,_conl,00145$
                           1921 ;	../fb_lpc922_old.c:577: connected=0;
   070B 10*0E 02           1922 	jbc	_connected,00206$
   070E 80 1A              1923 	sjmp	00145$
   0710                    1924 00206$:
                           1925 ;	../fb_lpc922_old.c:578: pcount=0;					// Paketzaehler zuruecksetzen
   0710 75*02 00           1926 	mov	_pcount,#0x00
                           1927 ;	../fb_lpc922_old.c:581: }
   0713 80 15              1928 	sjmp	00145$
   0715                    1929 00141$:
                           1930 ;	../fb_lpc922_old.c:588: if(tpdu==0x00){
   0715 EA                 1931 	mov	a,r2
   0716 70 12              1932 	jnz	00145$
                           1933 ;	../fb_lpc922_old.c:589: if((telegramm[7]&0xC0)==0x80) write_value_req();	// Objektwerte schreiben (zB. EISx)
   0718 74 C0              1934 	mov	a,#0xC0
   071A 55*0B              1935 	anl	a,(_telegramm + 0x0007)
   071C FA                 1936 	mov	r2,a
   071D BA 80 03           1937 	cjne	r2,#0x80,00135$
   0720 12s00r00           1938 	lcall	_write_value_req
   0723                    1939 00135$:
                           1940 ;	../fb_lpc922_old.c:590: if(telegramm[7]==0x00) read_value_req();			// Objektwert lesen und als read_value_response auf Bus senden
   0723 E5*0B              1941 	mov	a,(_telegramm + 0x0007)
   0725 70 03              1942 	jnz	00145$
   0727 12s00r00           1943 	lcall	_read_value_req
   072A                    1944 00145$:
                           1945 ;	../fb_lpc922_old.c:594: telpos=0;
   072A 75*23 00           1946 	mov	_telpos,#0x00
   072D 22                 1947 	ret
                           1948 ;------------------------------------------------------------
                           1949 ;Allocation info for local variables in function 'write_memory'
                           1950 ;------------------------------------------------------------
                           1951 ;ab                        Allocated to stack - offset 1
                           1952 ;n                         Allocated to stack - offset 2
                           1953 ;sloc0                     Allocated to stack - offset 3
                           1954 ;------------------------------------------------------------
                           1955 ;	../fb_lpc922_old.c:602: void write_memory(void)
                           1956 ;	-----------------------------------------
                           1957 ;	 function write_memory
                           1958 ;	-----------------------------------------
   072E                    1959 _write_memory:
   072E C0*00              1960 	push	_bp
   0730 E5 81              1961 	mov	a,sp
   0732 F5*00              1962 	mov	_bp,a
   0734 24 04              1963 	add	a,#0x04
   0736 F5 81              1964 	mov	sp,a
                           1965 ;	../fb_lpc922_old.c:606: ab=telegramm[7]&0x0F;		// Anzahl Bytes
   0738 A8*00              1966 	mov	r0,_bp
   073A 08                 1967 	inc	r0
   073B 74 0F              1968 	mov	a,#0x0F
   073D 55*0B              1969 	anl	a,(_telegramm + 0x0007)
   073F F6                 1970 	mov	@r0,a
                           1971 ;	../fb_lpc922_old.c:616: while(fb_state!=0);					// warten falls noch gesendet wird
   0740                    1972 00101$:
   0740 E5*27              1973 	mov	a,_fb_state
   0742 70 FC              1974 	jnz	00101$
                           1975 ;	../fb_lpc922_old.c:618: EA=0;
   0744 C2 AF              1976 	clr	_IEN0_7
                           1977 ;	../fb_lpc922_old.c:619: FMCON=0x00;					// load command, leert das pageregister
   0746 75 E4 00           1978 	mov	_FMCON,#0x00
                           1979 ;	../fb_lpc922_old.c:620: for(n=0;n<ab;n++) {
   0749 AB*0D              1980 	mov	r3,(_telegramm + 0x0009)
   074B AC*0C              1981 	mov	r4,(_telegramm + 0x0008)
   074D 74 01              1982 	mov	a,#0x01
   074F 5C                 1983 	anl	a,r4
   0750 24 1C              1984 	add	a,#0x1C
   0752 FD                 1985 	mov	r5,a
   0753 A8*00              1986 	mov	r0,_bp
   0755 08                 1987 	inc	r0
   0756 08                 1988 	inc	r0
   0757 76 00              1989 	mov	@r0,#0x00
   0759                    1990 00111$:
   0759 A8*00              1991 	mov	r0,_bp
   075B 08                 1992 	inc	r0
   075C 08                 1993 	inc	r0
   075D A9*00              1994 	mov	r1,_bp
   075F 09                 1995 	inc	r1
   0760 C3                 1996 	clr	c
   0761 E6                 1997 	mov	a,@r0
   0762 97                 1998 	subb	a,@r1
   0763 40 03              1999 	jc	00127$
   0765 02s08r01           2000 	ljmp	00114$
   0768                    2001 00127$:
                           2002 ;	../fb_lpc922_old.c:621: if(telegramm[8]==0 && (telegramm[9]+n)==0x60) status60=telegramm[10+n];
   0768 EC                 2003 	mov	a,r4
   0769 70 2E              2004 	jnz	00105$
   076B C0 05              2005 	push	ar5
   076D 8B 07              2006 	mov	ar7,r3
   076F 7D 00              2007 	mov	r5,#0x00
   0771 A8*00              2008 	mov	r0,_bp
   0773 08                 2009 	inc	r0
   0774 08                 2010 	inc	r0
   0775 86 02              2011 	mov	ar2,@r0
   0777 7E 00              2012 	mov	r6,#0x00
   0779 EA                 2013 	mov	a,r2
   077A 2F                 2014 	add	a,r7
   077B FF                 2015 	mov	r7,a
   077C EE                 2016 	mov	a,r6
   077D 3D                 2017 	addc	a,r5
   077E FD                 2018 	mov	r5,a
   077F E4                 2019 	clr	a
   0780 BF 60 04           2020 	cjne	r7,#0x60,00129$
   0783 BD 00 01           2021 	cjne	r5,#0x00,00129$
   0786 04                 2022 	inc	a
   0787                    2023 00129$:
   0787 D0 05              2024 	pop	ar5
   0789 60 0E              2025 	jz	00105$
   078B A8*00              2026 	mov	r0,_bp
   078D 08                 2027 	inc	r0
   078E 08                 2028 	inc	r0
   078F 74 0A              2029 	mov	a,#0x0A
   0791 26                 2030 	add	a,@r0
   0792 24r04              2031 	add	a,#_telegramm
   0794 F8                 2032 	mov	r0,a
   0795 86*2C              2033 	mov	_status60,@r0
   0797 80 02              2034 	sjmp	00106$
   0799                    2035 00105$:
                           2036 ;	../fb_lpc922_old.c:622: else WRITE_BYTE(telegramm[8],telegramm[9]+n,telegramm[n+10]);
   0799 8D E7              2037 	mov	_FMADRH,r5
   079B                    2038 00106$:
   079B A8*00              2039 	mov	r0,_bp
   079D 08                 2040 	inc	r0
   079E 08                 2041 	inc	r0
   079F E6                 2042 	mov	a,@r0
   07A0 2B                 2043 	add	a,r3
   07A1 F5 E6              2044 	mov	_FMADRL,a
   07A3 A8*00              2045 	mov	r0,_bp
   07A5 08                 2046 	inc	r0
   07A6 08                 2047 	inc	r0
   07A7 74 0A              2048 	mov	a,#0x0A
   07A9 26                 2049 	add	a,@r0
   07AA 24r04              2050 	add	a,#_telegramm
   07AC F8                 2051 	mov	r0,a
   07AD 86 E5              2052 	mov	_FMDATA,@r0
                           2053 ;	../fb_lpc922_old.c:624: if ((((telegramm[9]+n)&0x3F)==0x3F) && n!=(ab-1)) {		// Ende des 64-Byte Pageregisters, also zwischendurch flashen
   07AF 8B 02              2054 	mov	ar2,r3
   07B1 7E 00              2055 	mov	r6,#0x00
   07B3 A8*00              2056 	mov	r0,_bp
   07B5 08                 2057 	inc	r0
   07B6 08                 2058 	inc	r0
   07B7 A9*00              2059 	mov	r1,_bp
   07B9 09                 2060 	inc	r1
   07BA 09                 2061 	inc	r1
   07BB 09                 2062 	inc	r1
   07BC E6                 2063 	mov	a,@r0
   07BD F7                 2064 	mov	@r1,a
   07BE 09                 2065 	inc	r1
   07BF 77 00              2066 	mov	@r1,#0x00
   07C1 A8*00              2067 	mov	r0,_bp
   07C3 08                 2068 	inc	r0
   07C4 08                 2069 	inc	r0
   07C5 08                 2070 	inc	r0
   07C6 E6                 2071 	mov	a,@r0
   07C7 2A                 2072 	add	a,r2
   07C8 FA                 2073 	mov	r2,a
   07C9 08                 2074 	inc	r0
   07CA E6                 2075 	mov	a,@r0
   07CB 3E                 2076 	addc	a,r6
   07CC 53 02 3F           2077 	anl	ar2,#0x3F
   07CF 7E 00              2078 	mov	r6,#0x00
   07D1 BA 3F 25           2079 	cjne	r2,#0x3F,00113$
   07D4 BE 00 22           2080 	cjne	r6,#0x00,00113$
   07D7 A8*00              2081 	mov	r0,_bp
   07D9 08                 2082 	inc	r0
   07DA 86 02              2083 	mov	ar2,@r0
   07DC 7E 00              2084 	mov	r6,#0x00
   07DE 1A                 2085 	dec	r2
   07DF BA FF 01           2086 	cjne	r2,#0xff,00134$
   07E2 1E                 2087 	dec	r6
   07E3                    2088 00134$:
   07E3 A8*00              2089 	mov	r0,_bp
   07E5 08                 2090 	inc	r0
   07E6 08                 2091 	inc	r0
   07E7 08                 2092 	inc	r0
   07E8 E6                 2093 	mov	a,@r0
   07E9 B5 02 07           2094 	cjne	a,ar2,00135$
   07EC 08                 2095 	inc	r0
   07ED E6                 2096 	mov	a,@r0
   07EE B5 06 02           2097 	cjne	a,ar6,00135$
   07F1 80 06              2098 	sjmp	00113$
   07F3                    2099 00135$:
                           2100 ;	../fb_lpc922_old.c:625: STOP_WRITECYCLE;			// write command, schreibt pageregister ins flash und versetzt CPU in idle fuer 4ms
   07F3 75 E4 68           2101 	mov	_FMCON,#0x68
                           2102 ;	../fb_lpc922_old.c:626: START_WRITECYCLE;		// load command, leert das pageregister
   07F6 75 E4 00           2103 	mov	_FMCON,#0x00
   07F9                    2104 00113$:
                           2105 ;	../fb_lpc922_old.c:620: for(n=0;n<ab;n++) {
   07F9 A8*00              2106 	mov	r0,_bp
   07FB 08                 2107 	inc	r0
   07FC 08                 2108 	inc	r0
   07FD 06                 2109 	inc	@r0
   07FE 02s07r59           2110 	ljmp	00111$
   0801                    2111 00114$:
                           2112 ;	../fb_lpc922_old.c:629: FMCON=0x68;					// write command, schreibt pageregister ins flash und versetzt CPU in idle fuer 4ms
   0801 75 E4 68           2113 	mov	_FMCON,#0x68
                           2114 ;	../fb_lpc922_old.c:630: EA=1;
   0804 D2 AF              2115 	setb	_IEN0_7
   0806 85*00 81           2116 	mov	sp,_bp
   0809 D0*00              2117 	pop	_bp
   080B 22                 2118 	ret
                           2119 ;------------------------------------------------------------
                           2120 ;Allocation info for local variables in function 'set_pa'
                           2121 ;------------------------------------------------------------
                           2122 ;------------------------------------------------------------
                           2123 ;	../fb_lpc922_old.c:636: void set_pa(void)
                           2124 ;	-----------------------------------------
                           2125 ;	 function set_pa
                           2126 ;	-----------------------------------------
   080C                    2127 _set_pa:
                           2128 ;	../fb_lpc922_old.c:638: while(fb_state!=0);		// warten falls noch gesendet wird
   080C                    2129 00101$:
   080C E5*27              2130 	mov	a,_fb_state
   080E 70 FC              2131 	jnz	00101$
                           2132 ;	../fb_lpc922_old.c:639: EA=0;
   0810 C2 AF              2133 	clr	_IEN0_7
                           2134 ;	../fb_lpc922_old.c:640: FMCON=0x00;				// load command, leert das pageregister
   0812 75 E4 00           2135 	mov	_FMCON,#0x00
                           2136 ;	../fb_lpc922_old.c:641: FMADRH=0x1D;
   0815 75 E7 1D           2137 	mov	_FMADRH,#0x1D
                           2138 ;	../fb_lpc922_old.c:642: FMADRL=ADDRTAB+1;
   0818 75 E6 17           2139 	mov	_FMADRL,#0x17
                           2140 ;	../fb_lpc922_old.c:643: FMDATA=telegramm[8];
   081B 85*0C E5           2141 	mov	_FMDATA,(_telegramm + 0x0008)
                           2142 ;	../fb_lpc922_old.c:644: FMDATA=telegramm[9];	// nächstes Byte, da autoinkrement
   081E 85*0D E5           2143 	mov	_FMDATA,(_telegramm + 0x0009)
                           2144 ;	../fb_lpc922_old.c:645: FMCON=0x68;				// write command, schreibt pageregister ins flash und versetzt CPU in idle fuer 4ms
   0821 75 E4 68           2145 	mov	_FMCON,#0x68
                           2146 ;	../fb_lpc922_old.c:646: EA=1;
   0824 D2 AF              2147 	setb	_IEN0_7
   0826 22                 2148 	ret
                           2149 ;------------------------------------------------------------
                           2150 ;Allocation info for local variables in function 'read_objflags'
                           2151 ;------------------------------------------------------------
                           2152 ;objno                     Allocated to registers r2 
                           2153 ;------------------------------------------------------------
                           2154 ;	../fb_lpc922_old.c:652: unsigned char read_objflags(unsigned char objno)
                           2155 ;	-----------------------------------------
                           2156 ;	 function read_objflags
                           2157 ;	-----------------------------------------
   0827                    2158 _read_objflags:
   0827 AA 82              2159 	mov	r2,dpl
                           2160 ;	../fb_lpc922_old.c:654: return(eeprom[eeprom[COMMSTABPTR]+3+3*objno]);
   0829 90 1D 12           2161 	mov	dptr,#(_eeprom + 0x0012)
   082C E4                 2162 	clr	a
   082D 93                 2163 	movc	a,@a+dptr
   082E FB                 2164 	mov	r3,a
   082F 0B                 2165 	inc	r3
   0830 0B                 2166 	inc	r3
   0831 0B                 2167 	inc	r3
   0832 EA                 2168 	mov	a,r2
   0833 75 F0 03           2169 	mov	b,#0x03
   0836 A4                 2170 	mul	ab
   0837 2B                 2171 	add	a,r3
   0838 90 1D 00           2172 	mov	dptr,#_eeprom
   083B 93                 2173 	movc	a,@a+dptr
   083C F5 82              2174 	mov	dpl,a
   083E 22                 2175 	ret
                           2176 ;------------------------------------------------------------
                           2177 ;Allocation info for local variables in function 'find_first_objno'
                           2178 ;------------------------------------------------------------
                           2179 ;gal                       Allocated to stack - offset -3
                           2180 ;gah                       Allocated to registers r2 
                           2181 ;gapos                     Allocated to registers r2 
                           2182 ;gaposh                    Allocated to registers r7 
                           2183 ;atp                       Allocated to registers r4 
                           2184 ;assmax                    Allocated to registers r5 
                           2185 ;n                         Allocated to registers r6 
                           2186 ;objno                     Allocated to registers r3 
                           2187 ;asspos                    Allocated to registers r4 
                           2188 ;------------------------------------------------------------
                           2189 ;	../fb_lpc922_old.c:659: unsigned char find_first_objno(unsigned char gah, unsigned char gal)
                           2190 ;	-----------------------------------------
                           2191 ;	 function find_first_objno
                           2192 ;	-----------------------------------------
   083F                    2193 _find_first_objno:
   083F C0*00              2194 	push	_bp
   0841 85 81*00           2195 	mov	_bp,sp
   0844 AA 82              2196 	mov	r2,dpl
                           2197 ;	../fb_lpc922_old.c:663: objno=0xFF;
   0846 7B FF              2198 	mov	r3,#0xFF
                           2199 ;	../fb_lpc922_old.c:664: gapos=gapos_in_gat(gah,gal);
   0848 C0 03              2200 	push	ar3
   084A A8*00              2201 	mov	r0,_bp
   084C 18                 2202 	dec	r0
   084D 18                 2203 	dec	r0
   084E 18                 2204 	dec	r0
   084F E6                 2205 	mov	a,@r0
   0850 C0 E0              2206 	push	acc
   0852 8A 82              2207 	mov	dpl,r2
   0854 12s03rE9           2208 	lcall	_gapos_in_gat
   0857 AA 82              2209 	mov	r2,dpl
   0859 15 81              2210 	dec	sp
   085B D0 03              2211 	pop	ar3
                           2212 ;	../fb_lpc922_old.c:666: atp=eeprom[ASSOCTABPTR];
   085D 90 1D 11           2213 	mov	dptr,#(_eeprom + 0x0011)
   0860 E4                 2214 	clr	a
   0861 93                 2215 	movc	a,@a+dptr
                           2216 ;	../fb_lpc922_old.c:667: assmax=eeprom[atp];
   0862 FC                 2217 	mov	r4,a
   0863 F5 82              2218 	mov	dpl,a
   0865 75 83 1D           2219 	mov	dph,#(_eeprom >> 8)
   0868 E4                 2220 	clr	a
   0869 93                 2221 	movc	a,@a+dptr
   086A FD                 2222 	mov	r5,a
                           2223 ;	../fb_lpc922_old.c:668: if (gapos!=0xFF) {	// falls Gruppenadresse nicht vorhanden
   086B BA FF 02           2224 	cjne	r2,#0xFF,00115$
   086E 80 23              2225 	sjmp	00107$
   0870                    2226 00115$:
                           2227 ;	../fb_lpc922_old.c:669: n=0;
   0870 7E 00              2228 	mov	r6,#0x00
                           2229 ;	../fb_lpc922_old.c:670: asspos=atp+1;
   0872 0C                 2230 	inc	r4
                           2231 ;	../fb_lpc922_old.c:671: while(n<assmax) { 	// Schleife ueber Assoziationstabelle
   0873                    2232 00103$:
   0873 C3                 2233 	clr	c
   0874 EE                 2234 	mov	a,r6
   0875 9D                 2235 	subb	a,r5
   0876 50 1B              2236 	jnc	00107$
                           2237 ;	../fb_lpc922_old.c:672: gaposh=eeprom[asspos];
   0878 8C 82              2238 	mov	dpl,r4
   087A 75 83 1D           2239 	mov	dph,#(_eeprom >> 8)
   087D E4                 2240 	clr	a
   087E 93                 2241 	movc	a,@a+dptr
   087F FF                 2242 	mov	r7,a
                           2243 ;	../fb_lpc922_old.c:673: if(gapos==gaposh) {
   0880 EA                 2244 	mov	a,r2
   0881 B5 07 0A           2245 	cjne	a,ar7,00102$
                           2246 ;	../fb_lpc922_old.c:674: objno=eeprom[asspos+1];
   0884 EC                 2247 	mov	a,r4
   0885 04                 2248 	inc	a
   0886 90 1D 00           2249 	mov	dptr,#_eeprom
   0889 93                 2250 	movc	a,@a+dptr
   088A FF                 2251 	mov	r7,a
   088B FB                 2252 	mov	r3,a
                           2253 ;	../fb_lpc922_old.c:675: n=assmax;
   088C 8D 06              2254 	mov	ar6,r5
   088E                    2255 00102$:
                           2256 ;	../fb_lpc922_old.c:677: n++;
   088E 0E                 2257 	inc	r6
                           2258 ;	../fb_lpc922_old.c:678: asspos+=2;
   088F 0C                 2259 	inc	r4
   0890 0C                 2260 	inc	r4
   0891 80 E0              2261 	sjmp	00103$
   0893                    2262 00107$:
                           2263 ;	../fb_lpc922_old.c:681: return (objno);
   0893 8B 82              2264 	mov	dpl,r3
   0895 D0*00              2265 	pop	_bp
   0897 22                 2266 	ret
                           2267 ;------------------------------------------------------------
                           2268 ;Allocation info for local variables in function 'find_ga'
                           2269 ;------------------------------------------------------------
                           2270 ;objno                     Allocated to registers r2 
                           2271 ;asstab                    Allocated to registers r4 
                           2272 ;gapos                     Allocated to registers r3 
                           2273 ;asspos                    Allocated to registers r4 
                           2274 ;ga                        Allocated to registers r2 r4 
                           2275 ;------------------------------------------------------------
                           2276 ;	../fb_lpc922_old.c:686: unsigned int find_ga(unsigned char objno)
                           2277 ;	-----------------------------------------
                           2278 ;	 function find_ga
                           2279 ;	-----------------------------------------
   0898                    2280 _find_ga:
   0898 AA 82              2281 	mov	r2,dpl
                           2282 ;	../fb_lpc922_old.c:691: gapos=0xFE;
   089A 7B FE              2283 	mov	r3,#0xFE
                           2284 ;	../fb_lpc922_old.c:692: asstab=eeprom[ASSOCTABPTR];		// Adresse der Assoziationstabelle
   089C 90 1D 11           2285 	mov	dptr,#(_eeprom + 0x0011)
   089F E4                 2286 	clr	a
   08A0 93                 2287 	movc	a,@a+dptr
   08A1 FC                 2288 	mov	r4,a
                           2289 ;	../fb_lpc922_old.c:693: asspos=asstab+1+2*objno;
   08A2 0C                 2290 	inc	r4
   08A3 EA                 2291 	mov	a,r2
   08A4 2A                 2292 	add	a,r2
   08A5 2C                 2293 	add	a,r4
                           2294 ;	../fb_lpc922_old.c:695: if(eeprom[asspos+1]==objno) gapos=eeprom[asspos];
   08A6 FC                 2295 	mov	r4,a
   08A7 04                 2296 	inc	a
   08A8 90 1D 00           2297 	mov	dptr,#_eeprom
   08AB 93                 2298 	movc	a,@a+dptr
   08AC FD                 2299 	mov	r5,a
   08AD B5 02 09           2300 	cjne	a,ar2,00102$
   08B0 8C 82              2301 	mov	dpl,r4
   08B2 75 83 1D           2302 	mov	dph,#(_eeprom >> 8)
   08B5 E4                 2303 	clr	a
   08B6 93                 2304 	movc	a,@a+dptr
   08B7 FA                 2305 	mov	r2,a
   08B8 FB                 2306 	mov	r3,a
   08B9                    2307 00102$:
                           2308 ;	../fb_lpc922_old.c:697: if(gapos!=0xFE) {
   08B9 BB FE 02           2309 	cjne	r3,#0xFE,00112$
   08BC 80 1D              2310 	sjmp	00104$
   08BE                    2311 00112$:
                           2312 ;	../fb_lpc922_old.c:699: ga=eeprom[ADDRTAB+1+gapos*2]*256;
   08BE EB                 2313 	mov	a,r3
   08BF 2B                 2314 	add	a,r3
   08C0 FB                 2315 	mov	r3,a
   08C1 24 17              2316 	add	a,#0x17
   08C3 90 1D 00           2317 	mov	dptr,#_eeprom
   08C6 93                 2318 	movc	a,@a+dptr
   08C7 FC                 2319 	mov	r4,a
   08C8 7A 00              2320 	mov	r2,#0x00
                           2321 ;	../fb_lpc922_old.c:700: ga+=eeprom[ADDRTAB+2+gapos*2];
   08CA 74 18              2322 	mov	a,#0x18
   08CC 2B                 2323 	add	a,r3
   08CD 90 1D 00           2324 	mov	dptr,#_eeprom
   08D0 93                 2325 	movc	a,@a+dptr
   08D1 FB                 2326 	mov	r3,a
   08D2 7D 00              2327 	mov	r5,#0x00
   08D4 2A                 2328 	add	a,r2
   08D5 FA                 2329 	mov	r2,a
   08D6 ED                 2330 	mov	a,r5
   08D7 3C                 2331 	addc	a,r4
   08D8 FC                 2332 	mov	r4,a
   08D9 80 04              2333 	sjmp	00105$
   08DB                    2334 00104$:
                           2335 ;	../fb_lpc922_old.c:702: else ga=0;
   08DB 7A 00              2336 	mov	r2,#0x00
   08DD 7C 00              2337 	mov	r4,#0x00
   08DF                    2338 00105$:
                           2339 ;	../fb_lpc922_old.c:704: return(ga);
   08DF 8A 82              2340 	mov	dpl,r2
   08E1 8C 83              2341 	mov	dph,r4
   08E3 22                 2342 	ret
                           2343 ;------------------------------------------------------------
                           2344 ;Allocation info for local variables in function 'restart_hw'
                           2345 ;------------------------------------------------------------
                           2346 ;------------------------------------------------------------
                           2347 ;	../fb_lpc922_old.c:710: void restart_hw(void)
                           2348 ;	-----------------------------------------
                           2349 ;	 function restart_hw
                           2350 ;	-----------------------------------------
   08E4                    2351 _restart_hw:
                           2352 ;	../fb_lpc922_old.c:712: DIVM=0;			// Taktferquenz nicht teilen -> volles Tempo
   08E4 75 95 00           2353 	mov	_DIVM,#0x00
                           2354 ;	../fb_lpc922_old.c:714: P1M1=0x14;		// Port 1 auf quasi-bidirektional,
   08E7 75 91 14           2355 	mov	_P1M1,#0x14
                           2356 ;	../fb_lpc922_old.c:715: P1M2=0x4C;		// ausser P1.2(T0 als PWM Ausgang)=open-drain,
   08EA 75 92 4C           2357 	mov	_P1M2,#0x4C
                           2358 ;	../fb_lpc922_old.c:719: FBOUTC=0;		// Bus-Ausgang auf low
   08ED C2 96              2359 	clr	_P1_6
                           2360 ;	../fb_lpc922_old.c:721: TMOD=0x21;		// Timer 0 als 16-Bit Timer, Timer 1 als 8 Bit autoreload
   08EF 75 89 21           2361 	mov	_TMOD,#0x21
                           2362 ;	../fb_lpc922_old.c:722: TAMOD=0x00;
   08F2 75 8F 00           2363 	mov	_TAMOD,#0x00
                           2364 ;	../fb_lpc922_old.c:723: TR0=0;			// Timer 0 (zur Verwendung in app) zunaechst stoppen 
   08F5 C2 8C              2365 	clr	_TCON_4
                           2366 ;	../fb_lpc922_old.c:724: TR1=0;			// Timer 1 (Empfangs-Timer, nicht in app verwenden!) zunaechst stoppen
   08F7 C2 8E              2367 	clr	_TCON_6
                           2368 ;	../fb_lpc922_old.c:725: TH1=128;		// Timer 1 auf 104us/3
   08F9 75 8D 80           2369 	mov	_TH1,#0x80
                           2370 ;	../fb_lpc922_old.c:726: TL1=128;
   08FC 75 8B 80           2371 	mov	_TL1,#0x80
                           2372 ;	../fb_lpc922_old.c:727: TF1=0;
   08FF C2 8F              2373 	clr	_TCON_7
                           2374 ;	../fb_lpc922_old.c:729: RTCH=0x0E;		// Real Time Clock auf 65ms laden
   0901 75 D2 0E           2375 	mov	_RTCH,#0x0E
                           2376 ;	../fb_lpc922_old.c:730: RTCL=0xA0;		// (RTC ist ein down-counter mit 128 bit prescaler und osc-clock)
   0904 75 D3 A0           2377 	mov	_RTCL,#0xA0
                           2378 ;	../fb_lpc922_old.c:731: RTCCON=0x61;	// ... und starten
   0907 75 D1 61           2379 	mov	_RTCCON,#0x61
                           2380 ;	../fb_lpc922_old.c:733: interrupted=0;	// wird durch die interrupt-routine auf 1 gesetzt
   090A C2*01              2381 	clr	_interrupted
                           2382 ;	../fb_lpc922_old.c:734: IEN0=0x00;
   090C 75 A8 00           2383 	mov	_IEN0,#0x00
                           2384 ;	../fb_lpc922_old.c:735: IEN1=0x00;
   090F 75 E8 00           2385 	mov	_IEN1,#0x00
                           2386 ;	../fb_lpc922_old.c:737: ET1=0;			// Interrupt von Timer 1 sperren
   0912 C2 AB              2387 	clr	_IEN0_3
                           2388 ;	../fb_lpc922_old.c:738: EX0=0;			// Externen Interrupt 0 sperren
   0914 C2 A8              2389 	clr	_IEN0_0
                           2390 ;	../fb_lpc922_old.c:739: EX1=0;			// Externen Interrupt 1 sperren
   0916 C2 AA              2391 	clr	_IEN0_2
                           2392 ;	../fb_lpc922_old.c:740: EA=1;			// Interrupts prinzipiell freigeben
   0918 D2 AF              2393 	setb	_IEN0_7
                           2394 ;	../fb_lpc922_old.c:742: IP0=0x04;		// höchste Priorität fuer ext1
   091A 75 B8 04           2395 	mov	_IP0,#0x04
                           2396 ;	../fb_lpc922_old.c:743: IP0H=0x04;
   091D 75 B7 04           2397 	mov	_IP0H,#0x04
                           2398 ;	../fb_lpc922_old.c:744: IP1=0x00;
   0920 75 F8 00           2399 	mov	_IP1,#0x00
                           2400 ;	../fb_lpc922_old.c:745: IP1H=0x00;
   0923 75 F7 00           2401 	mov	_IP1H,#0x00
                           2402 ;	../fb_lpc922_old.c:746: IT1=1;			// Interrupt 1 flankengetriggert=1
   0926 D2 8A              2403 	setb	_TCON_2
                           2404 ;	../fb_lpc922_old.c:748: status60=0x2E;	// Status-Byte (steht normal im userram an 0x60)
   0928 75*2C 2E           2405 	mov	_status60,#0x2E
                           2406 ;	../fb_lpc922_old.c:750: ack=0;			// ack und nack flag zurücksetzen
   092B C2*03              2407 	clr	_ack
                           2408 ;	../fb_lpc922_old.c:751: nack=0;
   092D C2*04              2409 	clr	_nack
                           2410 ;	../fb_lpc922_old.c:752: send_ack=0;
   092F C2*0B              2411 	clr	_send_ack
                           2412 ;	../fb_lpc922_old.c:753: send_nack=0;
   0931 C2*0C              2413 	clr	_send_nack
                           2414 ;	../fb_lpc922_old.c:754: tel_arrived=0;	// kein Telegramm empfangen
   0933 C2*06              2415 	clr	_tel_arrived
                           2416 ;	../fb_lpc922_old.c:755: auto_ack=1;		// empfangene Telegramme automatisch mit ack bestätigen
   0935 D2*08              2417 	setb	_auto_ack
                           2418 ;	../fb_lpc922_old.c:756: tx_nextwrite=0;	// Zeiger auf nächste zu schreibende Objektnr. in tx_buffer
   0937 75*2A 00           2419 	mov	_tx_nextwrite,#0x00
                           2420 ;	../fb_lpc922_old.c:757: tx_nextsend=0;	// Zeiger auf nächste zu sendende Objektnr. in tx_buffer
   093A 75*2B 00           2421 	mov	_tx_nextsend,#0x00
                           2422 ;	../fb_lpc922_old.c:758: pcount=0;		// Paketzaehler initialisieren
   093D 75*02 00           2423 	mov	_pcount,#0x00
                           2424 ;	../fb_lpc922_old.c:759: connected=0;	// keine Verbindung
   0940 C2*0E              2425 	clr	_connected
                           2426 ;	../fb_lpc922_old.c:760: transparency=0;	// fremde Gruppentelegramme werden ignoriert
   0942 C2*0D              2427 	clr	_transparency
                           2428 ;	../fb_lpc922_old.c:761: init_rx();		// Empfang initialisieren
   0944 02s03r46           2429 	ljmp	_init_rx
                           2430 	.area CSEG    (CODE)
                           2431 	.area CONST   (CODE)
                    1C00   2432 _userram	=	0x1c00
                    1D00   2433 _eeprom	=	0x1d00
                           2434 	.area XINIT   (CODE)
                           2435 	.area CABS    (ABS,CODE)
